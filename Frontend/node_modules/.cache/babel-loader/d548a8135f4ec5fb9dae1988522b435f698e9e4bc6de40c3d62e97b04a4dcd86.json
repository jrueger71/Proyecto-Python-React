{"ast":null,"code":"var _jsxFileName = \"/Volumes/Respaldos/Desarrollo/dev/Agencia/Frontend/src/App.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$(),\n  _s5 = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { initializeApp } from 'firebase/app';\nimport { getAuth, signInAnonymously, onAuthStateChanged, signOut, createUserWithEmailAndPassword, signInWithEmailAndPassword, signInWithCustomToken } from 'firebase/auth';\nimport { getFirestore, collection, onSnapshot, deleteDoc, addDoc, updateDoc, doc, setLogLevel } from 'firebase/firestore';\nimport { getStorage, ref, uploadBytes, getDownloadURL, deleteObject } from 'firebase/storage';\n\n// Asume que Tailwind CSS estÃ¡ disponible globalmente, como se requiere en el entorno.\n\n// =================================================================================\n// ðŸ”¥ CONFIGURACIÃ“N DE FIREBASE (TU CÃ“DIGO)\n// Se usa la configuraciÃ³n que proporcionaste directamente.\n// =================================================================================\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst firebaseConfig = {\n  apiKey: \"AIzaSyC7zJ6jb9FYIUVfNzLVPp43TFNb11KDPqw\",\n  authDomain: \"agencia-futbol.firebaseapp.com\",\n  projectId: \"agencia-futbol\",\n  storageBucket: \"agencia-futbol.firebasestorage.app\",\n  messagingSenderId: \"541080953122\",\n  appId: \"1:541080953122:web:ddb16c0083768d4c4c057b\",\n  measurementId: \"G-VE70EW7FDC\"\n};\n\n// No modifiques estas variables. Se proporcionan desde el entorno.\nconst currentAppId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';\nconst initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;\n\n// Inicializa Firebase con la configuraciÃ³n proporcionada.\nlet app;\nlet auth;\nlet db;\nlet storage;\nif (firebaseConfig) {\n  app = initializeApp(firebaseConfig);\n  auth = getAuth(app);\n  db = getFirestore(app);\n  storage = getStorage(app);\n  setLogLevel('debug');\n}\n\n// =================================================================================\n// COMPONENTES Y LÃ“GICA DE LA APLICACIÃ“N\n// =================================================================================\n\n// Navbar component for navigation.\nconst Navbar = ({\n  setCurrentPage,\n  handleLogout\n}) => {\n  return /*#__PURE__*/_jsxDEV(\"nav\", {\n    className: \"bg-gray-900 p-4 shadow-xl rounded-b-3xl\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container mx-auto flex flex-wrap justify-between items-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"https://placehold.co/50x50/cccccc/333333?text=Logo\" // Placeholder for the logo\n          ,\n          alt: \"Nueva Futbol Chile SpA Logo\",\n          className: \"h-10 w-10 rounded-full object-cover border border-gray-600\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-white text-xl font-extrabold uppercase hidden sm:block\",\n          children: \"Nueva Futbol Chile SpA\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-grow justify-center sm:justify-end mt-4 sm:mt-0 space-x-2 sm:space-x-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setCurrentPage('Home'),\n          className: \"text-gray-300 hover:text-white transition-colors duration-200 p-2 rounded-lg flex items-center space-x-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            className: \"h-5 w-5\",\n            fill: \"none\",\n            viewBox: \"0 0 24 24\",\n            stroke: \"currentColor\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: 2,\n              d: \"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"hidden md:inline\",\n            children: \"Inicio\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setCurrentPage('PlayerManagement'),\n          className: \"text-gray-300 hover:text-white transition-colors duration-200 p-2 rounded-lg flex items-center space-x-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            className: \"h-5 w-5\",\n            fill: \"none\",\n            viewBox: \"0 0 24 24\",\n            stroke: \"currentColor\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: 2,\n              d: \"M17 20h2a2 2 0 002-2V7a2 2 0 00-2-2h-2V3a1 1 0 00-2 0v2H7V3a1 1 0 00-2 0v2H3a2 2 0 00-2 2v11a2 2 0 002 2h2m0-6h14m-8 6h4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 69,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"hidden md:inline\",\n            children: \"Jugadores\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setCurrentPage('FinanceManagement'),\n          className: \"text-gray-300 hover:text-white transition-colors duration-200 p-2 rounded-lg flex items-center space-x-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            className: \"h-5 w-5\",\n            fill: \"none\",\n            viewBox: \"0 0 24 24\",\n            stroke: \"currentColor\",\n            children: [/*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: 2,\n              d: \"M12 8c1.657 0 3 1.343 3 3s-1.343 3-3 3S9 12.657 9 11s1.343-3 3-3z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: 2,\n              d: \"M12 18c-4.418 0-8-3.582-8-8s3.582-8 8-8 8 3.582 8 8-3.582 8-8 8z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"hidden md:inline\",\n            children: \"Finanzas\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setCurrentPage('Other'),\n          className: \"text-gray-300 hover:text-white transition-colors duration-200 p-2 rounded-lg flex items-center space-x-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            className: \"h-5 w-5\",\n            fill: \"none\",\n            viewBox: \"0 0 24 24\",\n            stroke: \"currentColor\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: 2,\n              d: \"M9 20l-5.447-2.724A2 2 0 013 15.618V6.382a2 2 0 011.553-1.854L9 2m0 18v-8.5a2 2 0 01.553-1.854L15 9m-6 10.5V15a2 2 0 00-2-2H4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"hidden md:inline\",\n            children: \"Otros\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleLogout,\n        className: \"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-full transition-all duration-200 shadow-lg flex items-center space-x-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          className: \"h-5 w-5\",\n          fill: \"none\",\n          viewBox: \"0 0 24 24\",\n          stroke: \"currentColor\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            strokeWidth: 2,\n            d: \"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1m-4-1v1m-2-1v1m10 0v-1m-2 1v-1m-2-1v1m-4-1v1m-2-1v1M7 8h10a2 2 0 012 2v10a2 2 0 01-2 2H7a2 2 0 01-2-2V10a2 2 0 012-2z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"hidden sm:inline\",\n          children: \"Salir\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n};\n\n// Home view component.\n_c = Navbar;\nconst HomeView = () => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"flex flex-col items-center justify-center text-center p-8 bg-gray-800 text-gray-200 rounded-3xl shadow-xl m-4 border border-gray-700\",\n  children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n    className: \"text-3xl font-bold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600\",\n    children: \"Bienvenido al Panel de Administraci\\xF3n\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n    className: \"text-lg text-gray-400\",\n    children: \"Selecciona una opci\\xF3n del men\\xFA para comenzar.\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 5\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 101,\n  columnNumber: 3\n}, this);\n\n// Login screen component.\n_c2 = HomeView;\nconst LoginScreen = ({\n  auth,\n  onLoginSuccess\n}) => {\n  _s();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [isRegistering, setIsRegistering] = useState(false);\n  const [errorMessage, setErrorMessage] = useState('');\n  const handleAuth = async () => {\n    if (!auth) {\n      setErrorMessage(\"Firebase no estÃ¡ inicializado.\");\n      return;\n    }\n    try {\n      setErrorMessage('');\n      if (isRegistering) {\n        await createUserWithEmailAndPassword(auth, email, password);\n      } else {\n        await signInWithEmailAndPassword(auth, email, password);\n      }\n      onLoginSuccess(); // Call the login success function\n    } catch (error) {\n      console.error(\"Authentication error:\", error);\n      // Firebase error codes for more user-friendly messages\n      let userMessage = \"Error de autenticaciÃ³n. Por favor, verifica tus credenciales.\";\n      if (error.code === 'auth/invalid-email') {\n        userMessage = \"El formato del correo electrÃ³nico es invÃ¡lido.\";\n      } else if (error.code === 'auth/user-disabled') {\n        userMessage = \"El usuario ha sido deshabilitado.\";\n      } else if (error.code === 'auth/user-not-found' || error.code === 'auth/wrong-password') {\n        userMessage = \"Correo electrÃ³nico o contraseÃ±a incorrectos.\";\n      } else if (error.code === 'auth/email-already-in-use') {\n        userMessage = \"Este correo electrÃ³nico ya estÃ¡ registrado.\";\n      } else if (error.code === 'auth/weak-password') {\n        userMessage = \"La contraseÃ±a debe tener al menos 6 caracteres.\";\n      }\n      setErrorMessage(userMessage);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex items-center justify-center min-h-screen bg-gradient-to-br from-gray-900 to-gray-700 p-4\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-gray-800 p-8 rounded-3xl shadow-2xl w-full max-w-md border border-gray-700\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-2xl font-bold text-white text-center mb-6 text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600\",\n        children: isRegistering ? 'Crear Cuenta' : 'Iniciar SesiÃ³n'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }, this), errorMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-red-800 border border-red-600 text-red-200 px-4 py-3 rounded-lg relative mb-4 text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          className: \"font-bold\",\n          children: \"Error:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"block sm:inline ml-2\",\n          children: errorMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"email\",\n        placeholder: \"Correo electr\\xF3nico\",\n        value: email,\n        onChange: e => setEmail(e.target.value),\n        className: \"w-full p-3 mb-4 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-purple-500 transition-colors\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        placeholder: \"Contrase\\xF1a\",\n        value: password,\n        onChange: e => setPassword(e.target.value),\n        className: \"w-full p-3 mb-6 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-purple-500 transition-colors\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleAuth,\n        className: \"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl transition-all duration-300 shadow-lg transform hover:scale-105\",\n        children: isRegistering ? 'Registrarse' : 'Ingresar'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-4 text-center\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setIsRegistering(!isRegistering),\n          className: \"text-gray-400 hover:text-white transition-colors duration-200 text-sm\",\n          children: isRegistering ? 'Â¿Ya tienes una cuenta? Iniciar SesiÃ³n' : 'Â¿No tienes una cuenta? Registrarse'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 147,\n    columnNumber: 5\n  }, this);\n};\n\n// Player management component.\n_s(LoginScreen, \"PEo2BDOiB9igcW+wP9HLAH5DGUY=\");\n_c3 = LoginScreen;\nconst PlayerManager = ({\n  db,\n  userId,\n  currentAppId\n}) => {\n  _s2();\n  const [players, setPlayers] = useState([]);\n  const [finances, setFinances] = useState([]); // For calculating personal balance\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [showAddPlayerModal, setShowAddPlayerModal] = useState(false);\n  const [editingPlayer, setEditingPlayer] = useState(null); // For editing an existing player\n  const [modalPlayer, setModalPlayer] = useState({\n    // State for the modal (add/edit)\n    rut: '',\n    name: '',\n    birthDate: '',\n    skillFoot: '',\n    shoeSize: '',\n    gloveSize: '',\n    height: '',\n    weight: '',\n    agency: {\n      incorporationDate: '',\n      contractActive: false,\n      contractDate: '',\n      contractDuration: '',\n      contractPdfUrl: '',\n      contractPdfFile: null\n    },\n    club: {\n      name: '',\n      position: '',\n      contractActive: false,\n      contractDate: '',\n      contractDuration: '',\n      salary: '',\n      commissionPercentage: '',\n      commissionFixed: '',\n      transfermarktProfile: '',\n      transfermarktValuation: ''\n    },\n    other: {\n      address: '',\n      phone: '',\n      email: '',\n      instagram: '',\n      photos: [null, null, null],\n      photoUrls: [],\n      videoLinks: ['']\n    }\n  });\n  const storage = getStorage();\n\n  // Helper to build the player collection path safely.\n  const getPlayersCollectionPath = appId => {\n    return appId ? `artifacts/${appId}/public/data/players` : `public/data/players`;\n  };\n\n  // Helper to build the finance collection path safely.\n  const getFinancesCollectionPath = appId => {\n    return appId ? `artifacts/${appId}/public/data/finances` : `public/data/finances`;\n  };\n\n  // Function to calculate the contract expiration date.\n  const getContractExpirationDate = (contractDate, contractDuration) => {\n    if (!contractDate || !contractDuration) return 'N/A';\n    const date = new Date(contractDate);\n    date.setMonth(date.getMonth() + parseInt(contractDuration, 10));\n    // Format the date as DD/MM/YYYY\n    const day = String(date.getDate()).padStart(2, '0');\n    const month = String(date.getMonth() + 1).padStart(2, '0'); // Months are 0-indexed\n    const year = date.getFullYear();\n    return `${day}/${month}/${year}`;\n  };\n\n  // Function to check if a contract is expiring within 6 months.\n  const isExpiringSoon = (contractDate, contractDuration) => {\n    if (!contractDate || !contractDuration) return false;\n    const expirationDate = new Date(contractDate);\n    expirationDate.setMonth(expirationDate.getMonth() + parseInt(contractDuration, 10));\n    const today = new Date();\n    const sixMonthsFromNow = new Date();\n    sixMonthsFromNow.setMonth(sixMonthsFromNow.getMonth() + 6);\n    // Check if the expiration date is in the future and within the next 6 months\n    return expirationDate > today && expirationDate <= sixMonthsFromNow;\n  };\n\n  // Effect to fetch players and finances.\n  useEffect(() => {\n    if (!db) return;\n    setLoading(true);\n    setError(null);\n    // Subscribe to changes in the players collection.\n    const playersCollectionRef = collection(db, getPlayersCollectionPath(currentAppId));\n    const unsubscribePlayers = onSnapshot(playersCollectionRef, snapshot => {\n      const playersData = snapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      setPlayers(playersData);\n    }, err => {\n      console.error(\"Error al cargar jugadores:\", err);\n      setError(\"No se pudieron cargar los jugadores.\");\n    });\n    // Subscribe to changes in the finances collection.\n    const financesCollectionRef = collection(db, getFinancesCollectionPath(currentAppId));\n    const unsubscribeFinances = onSnapshot(financesCollectionRef, snapshot => {\n      const financesData = snapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      setFinances(financesData);\n      setLoading(false);\n    }, err => {\n      console.error(\"Error al cargar finanzas de jugadores:\", err);\n      setError(\"No se pudieron cargar las finanzas de los jugadores.\");\n      setLoading(false);\n    });\n    return () => {\n      unsubscribePlayers();\n      unsubscribeFinances();\n    };\n  }, [db, currentAppId]);\n\n  // Function to calculate a player's personal balance.\n  const getPlayerBalance = playerId => {\n    if (!playerId || !finances) return 0;\n    const playerTransactions = finances.filter(t => t.playerId === playerId);\n    const income = playerTransactions.filter(t => t.type === 'income').reduce((sum, t) => sum + t.amount, 0);\n    const expenses = playerTransactions.filter(t => t.type === 'expense').reduce((sum, t) => sum + t.amount, 0);\n    return income - expenses;\n  };\n\n  // Initialize modal state when opened for adding or editing.\n  useEffect(() => {\n    if (showAddPlayerModal) {\n      if (editingPlayer) {\n        setModalPlayer(editingPlayer);\n      } else {\n        setModalPlayer({\n          rut: '',\n          name: '',\n          birthDate: '',\n          skillFoot: '',\n          shoeSize: '',\n          gloveSize: '',\n          height: '',\n          weight: '',\n          agency: {\n            incorporationDate: '',\n            contractActive: false,\n            contractDate: '',\n            contractDuration: '',\n            contractPdfUrl: '',\n            contractPdfFile: null\n          },\n          club: {\n            name: '',\n            position: '',\n            contractActive: false,\n            contractDate: '',\n            contractDuration: '',\n            salary: '',\n            commissionPercentage: '',\n            commissionFixed: '',\n            transfermarktProfile: '',\n            transfermarktValuation: ''\n          },\n          other: {\n            address: '',\n            phone: '',\n            email: '',\n            instagram: '',\n            photos: [null, null, null],\n            photoUrls: [],\n            videoLinks: ['']\n          }\n        });\n      }\n    }\n  }, [showAddPlayerModal, editingPlayer]);\n  const handleDeletePlayer = async (playerId, contractPdfUrl, photoUrls = []) => {\n    const confirmed = await new Promise(resolve => {\n      const confirmBox = document.createElement('div');\n      confirmBox.className = 'fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50 p-4';\n      confirmBox.innerHTML = `\n            <div class=\"bg-gray-800 p-6 rounded-3xl shadow-2xl w-full max-w-sm border border-gray-700 text-white text-center\">\n                <p class=\"mb-4\">Â¿EstÃ¡s seguro de que quieres eliminar este jugador? Esta acciÃ³n es irreversible.</p>\n                <div class=\"flex justify-around\">\n                    <button id=\"confirm-yes\" class=\"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-full transition-colors duration-200\">SÃ­, eliminar</button>\n                    <button id=\"confirm-no\" class=\"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-full transition-colors duration-200\">Cancelar</button>\n                </div>\n            </div>\n        `;\n      document.body.appendChild(confirmBox);\n      document.getElementById('confirm-yes').onclick = () => {\n        document.body.removeChild(confirmBox);\n        resolve(true);\n      };\n      document.getElementById('confirm-no').onclick = () => {\n        document.body.removeChild(confirmBox);\n        resolve(false);\n      };\n    });\n    if (!confirmed) {\n      return;\n    }\n    try {\n      const playerDocRef = doc(db, getPlayersCollectionPath(currentAppId), playerId);\n      await deleteDoc(playerDocRef);\n      if (contractPdfUrl) {\n        const fileRef = ref(storage, contractPdfUrl);\n        await deleteObject(fileRef).catch(e => console.warn(\"Error al eliminar PDF de Storage:\", e));\n      }\n      for (const url of photoUrls) {\n        const fileRef = ref(storage, url);\n        await deleteObject(fileRef).catch(e => console.warn(\"Error al eliminar foto de Storage:\", e));\n      }\n      setError(null);\n    } catch (e) {\n      console.error(\"Error al eliminar jugador:\", e);\n      setError(\"No se pudo eliminar el jugador: \" + e.message);\n    }\n  };\n  const handlePdfFileChange = e => {\n    if (e.target.files[0]) {\n      setModalPlayer(prev => ({\n        ...prev,\n        agency: {\n          ...prev.agency,\n          contractPdfFile: e.target.files[0]\n        }\n      }));\n    } else {\n      setModalPlayer(prev => ({\n        ...prev,\n        agency: {\n          ...prev.agency,\n          contractPdfFile: null\n        }\n      }));\n    }\n  };\n  const handlePhotoFileChange = (e, index) => {\n    const files = Array.from(e.target.files);\n    setModalPlayer(prev => {\n      const updatedPhotos = [...prev.other.photos];\n      if (files[0]) {\n        updatedPhotos[index] = files[0];\n      } else {\n        updatedPhotos[index] = null;\n      }\n      return {\n        ...prev,\n        other: {\n          ...prev.other,\n          photos: updatedPhotos\n        }\n      };\n    });\n  };\n  const handleVideoLinkChange = (e, index) => {\n    setModalPlayer(prev => {\n      const updatedVideoLinks = [...prev.other.videoLinks];\n      updatedVideoLinks[index] = e.target.value;\n      return {\n        ...prev,\n        other: {\n          ...prev.other,\n          videoLinks: updatedVideoLinks\n        }\n      };\n    });\n  };\n  const addVideoLinkField = () => {\n    setModalPlayer(prev => ({\n      ...prev,\n      other: {\n        ...prev.other,\n        videoLinks: [...prev.other.videoLinks, '']\n      }\n    }));\n  };\n  const removeVideoLinkField = index => {\n    setModalPlayer(prev => ({\n      ...prev,\n      other: {\n        ...prev.other,\n        videoLinks: prev.other.videoLinks.filter((_, i) => i !== index)\n      }\n    }));\n  };\n  const handleSavePlayer = async () => {\n    if (!modalPlayer.rut || !modalPlayer.name || !modalPlayer.birthDate || !modalPlayer.height || !modalPlayer.weight || !modalPlayer.club.name || !modalPlayer.club.position) {\n      setError(\"Por favor, completa los campos obligatorios: RUT, Nombre, Fecha de Nacimiento, Altura, Peso, Club y PosiciÃ³n en el Club.\");\n      return;\n    }\n    if (!userId) {\n      setError(\"Error: El ID de usuario no estÃ¡ disponible. AsegÃºrate de estar autenticado para subir archivos.\");\n      return;\n    }\n    try {\n      var _editingPlayer$other;\n      setError(null);\n      let pdfUrl = modalPlayer.agency.contractPdfUrl;\n      // Upload new PDF if one was selected\n      if (modalPlayer.agency.contractActive && modalPlayer.agency.contractPdfFile) {\n        const file = modalPlayer.agency.contractPdfFile;\n        // Use the correct path for contract PDFs based on Firebase Storage rules\n        const storageRef = ref(storage, `player_contracts/${userId}/${file.name}_${new Date().getTime()}`);\n        const snapshot = await uploadBytes(storageRef, file);\n        pdfUrl = await getDownloadURL(snapshot.ref);\n      }\n      const photoUrls = [...((editingPlayer === null || editingPlayer === void 0 ? void 0 : (_editingPlayer$other = editingPlayer.other) === null || _editingPlayer$other === void 0 ? void 0 : _editingPlayer$other.photoUrls) || [])]; // Start with existing photo URLs\n      // Upload new photos\n      for (let i = 0; i < modalPlayer.other.photos.length; i++) {\n        const photoFile = modalPlayer.other.photos[i];\n        if (photoFile) {\n          // Use the correct path for photos based on Firebase Storage rules\n          const photoStorageRef = ref(storage, `player_photos/${userId}/${photoFile.name}_${new Date().getTime()}`);\n          const photoSnapshot = await uploadBytes(photoStorageRef, photoFile);\n          const url = await getDownloadURL(photoSnapshot.ref);\n          photoUrls.push(url); // Add new URLs\n        }\n      }\n      const playerToSave = {\n        ...modalPlayer,\n        agency: {\n          ...modalPlayer.agency,\n          contractPdfUrl: pdfUrl,\n          contractPdfFile: null\n        },\n        other: {\n          ...modalPlayer.other,\n          photos: [],\n          photoUrls: photoUrls.filter(url => url),\n          // Clean nulls and save URLs\n          videoLinks: modalPlayer.other.videoLinks.filter(link => link.trim() !== '')\n        }\n      };\n      if (editingPlayer) {\n        const playerDocRef = doc(db, getPlayersCollectionPath(currentAppId), editingPlayer.id);\n        await updateDoc(playerDocRef, playerToSave);\n      } else {\n        await addDoc(collection(db, getPlayersCollectionPath(currentAppId)), playerToSave);\n      }\n      setShowAddPlayerModal(false);\n      setEditingPlayer(null);\n      setError(null);\n    } catch (e) {\n      console.error(\"Error al guardar jugador:\", e);\n      setError(`No se pudo guardar el jugador: ${e.message}. Verifica el RUT y los campos, o problemas con la subida de archivos.`);\n    }\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"text-white text-center mt-8\",\n    children: \"Cargando jugadores y finanzas...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 497,\n    columnNumber: 23\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-red-800 text-red-200 p-4 rounded-lg text-center mx-4 mt-4\",\n    children: error\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 498,\n    columnNumber: 21\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-4 md:p-8 bg-gray-900 text-white min-h-screen\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-wrap justify-between items-center mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600 mb-4 md:mb-0\",\n        children: \"Gesti\\xF3n de Jugadores\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 503,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          setShowAddPlayerModal(true);\n          setEditingPlayer(null);\n        } // Opens the modal in add mode\n        ,\n        className: \"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-full transition-all duration-200 flex items-center space-x-2 shadow-lg transform hover:scale-105\",\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          className: \"h-5 w-5\",\n          fill: \"none\",\n          viewBox: \"0 0 24 24\",\n          stroke: \"currentColor\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            strokeWidth: 2,\n            d: \"M12 6v6m0 0v6m0-6h6m-6 0H6\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 509,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 508,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Agregar Jugador\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 511,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 504,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 502,\n      columnNumber: 7\n    }, this), showAddPlayerModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50 p-4 overflow-y-auto\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-gray-800 p-6 rounded-3xl shadow-2xl w-full max-w-3xl border border-gray-700 relative my-8 max-h-[90vh] overflow-y-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            setShowAddPlayerModal(false);\n            setEditingPlayer(null);\n            setError(null);\n          },\n          className: \"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            className: \"h-6 w-6\",\n            fill: \"none\",\n            viewBox: \"0 0 24 24\",\n            stroke: \"currentColor\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: 2,\n              d: \"M6 18L18 6M6 6l12 12\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 520,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 519,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 518,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-2xl font-bold mb-6 text-white text-center\",\n          children: editingPlayer ? 'Editar Jugador' : 'Nuevo Jugador'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 523,\n          columnNumber: 13\n        }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"bg-red-800 border border-red-600 text-red-200 px-4 py-3 rounded relative mb-4 text-center\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 524,\n          columnNumber: 23\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-8 p-4 border border-gray-700 rounded-2xl\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"text-xl font-semibold text-yellow-400 mb-4\",\n            children: \"Datos Personales\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 528,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"RUT (Identificaci\\xF3n Principal)\",\n              value: modalPlayer.rut,\n              onChange: e => setModalPlayer({\n                ...modalPlayer,\n                rut: e.target.value\n              }),\n              className: \"w-full p-3 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 530,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Nombre Completo\",\n              value: modalPlayer.name,\n              onChange: e => setModalPlayer({\n                ...modalPlayer,\n                name: e.target.value\n              }),\n              className: \"w-full p-3 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 531,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              placeholder: \"Fecha de Nacimiento\",\n              value: modalPlayer.birthDate,\n              onChange: e => setModalPlayer({\n                ...modalPlayer,\n                birthDate: e.target.value\n              }),\n              className: \"w-full p-3 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 532,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Pie H\\xE1bil\",\n              value: modalPlayer.skillFoot,\n              onChange: e => setModalPlayer({\n                ...modalPlayer,\n                skillFoot: e.target.value\n              }),\n              className: \"w-full p-3 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 533,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              placeholder: \"Talla de Calzado (UK)\",\n              value: modalPlayer.shoeSize,\n              onChange: e => setModalPlayer({\n                ...modalPlayer,\n                shoeSize: e.target.value\n              }),\n              className: \"w-full p-3 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 534,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              placeholder: \"Talla de Guante (US)\",\n              value: modalPlayer.gloveSize,\n              onChange: e => setModalPlayer({\n                ...modalPlayer,\n                gloveSize: e.target.value\n              }),\n              className: \"w-full p-3 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 535,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              placeholder: \"Altura (cm)\",\n              value: modalPlayer.height,\n              onChange: e => setModalPlayer({\n                ...modalPlayer,\n                height: e.target.value\n              }),\n              className: \"w-full p-3 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 536,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              placeholder: \"Peso (kg)\",\n              value: modalPlayer.weight,\n              onChange: e => setModalPlayer({\n                ...modalPlayer,\n                weight: e.target.value\n              }),\n              className: \"w-full p-3 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 537,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 529,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 527,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-8 p-4 border border-gray-700 rounded-2xl\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"text-xl font-semibold text-yellow-400 mb-4\",\n            children: \"Datos Profesionales y Financieros\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 542,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-6 pb-4 border-b border-gray-700\",\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              className: \"text-lg font-medium text-gray-300 mb-3\",\n              children: \"Agencia\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 545,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              placeholder: \"Fecha de Incorporaci\\xF3n\",\n              value: modalPlayer.agency.incorporationDate,\n              onChange: e => setModalPlayer(prev => ({\n                ...prev,\n                agency: {\n                  ...prev.agency,\n                  incorporationDate: e.target.value\n                }\n              })),\n              className: \"w-full p-3 mb-4 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 546,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"agencyContract\",\n                className: \"text-gray-400\",\n                children: \"Contrato con Agencia Activo:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 548,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"checkbox\",\n                id: \"agencyContract\",\n                checked: modalPlayer.agency.contractActive,\n                onChange: e => setModalPlayer(prev => ({\n                  ...prev,\n                  agency: {\n                    ...prev.agency,\n                    contractActive: e.target.checked\n                  }\n                })),\n                className: \"form-checkbox h-5 w-5 text-blue-600 rounded\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 549,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 547,\n              columnNumber: 17\n            }, this), modalPlayer.agency.contractActive && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-1 md:grid-cols-2 gap-4 mt-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"date\",\n                placeholder: \"Fecha de Contrato\",\n                value: modalPlayer.agency.contractDate,\n                onChange: e => setModalPlayer(prev => ({\n                  ...prev,\n                  agency: {\n                    ...prev.agency,\n                    contractDate: e.target.value\n                  }\n                })),\n                className: \"w-full p-3 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 559,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                placeholder: \"Duraci\\xF3n (meses)\",\n                value: modalPlayer.agency.contractDuration,\n                onChange: e => setModalPlayer(prev => ({\n                  ...prev,\n                  agency: {\n                    ...prev.agency,\n                    contractDuration: e.target.value\n                  }\n                })),\n                className: \"w-full p-3 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 560,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"block text-sm font-medium text-gray-400 mb-1\",\n                  children: \"Subir Contrato PDF:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 562,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"file\",\n                  accept: \".pdf\",\n                  onChange: handlePdfFileChange,\n                  className: \"w-full text-white text-sm file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-500 file:text-white hover:file:bg-blue-600\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 563,\n                  columnNumber: 23\n                }, this), modalPlayer.agency.contractPdfFile && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-gray-500 text-sm mt-1\",\n                  children: [\"Archivo seleccionado: \", modalPlayer.agency.contractPdfFile.name]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 564,\n                  columnNumber: 62\n                }, this), modalPlayer.agency.contractPdfUrl && !modalPlayer.agency.contractPdfFile && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-gray-500 text-sm mt-1\",\n                  children: [\"PDF existente: \", /*#__PURE__*/_jsxDEV(\"a\", {\n                    href: modalPlayer.agency.contractPdfUrl,\n                    target: \"_blank\",\n                    rel: \"noopener noreferrer\",\n                    className: \"text-blue-400 hover:underline\",\n                    children: \"Ver\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 565,\n                    columnNumber: 157\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 565,\n                  columnNumber: 100\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 561,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 558,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 544,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-6 pb-4 border-b border-gray-700\",\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              className: \"text-lg font-medium text-gray-300 mb-3\",\n              children: \"Club\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 572,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Club Actual\",\n              value: modalPlayer.club.name,\n              onChange: e => setModalPlayer(prev => ({\n                ...prev,\n                club: {\n                  ...prev.club,\n                  name: e.target.value\n                }\n              })),\n              className: \"w-full p-3 mb-4 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 573,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Posici\\xF3n en el Club\",\n              value: modalPlayer.club.position,\n              onChange: e => setModalPlayer(prev => ({\n                ...prev,\n                club: {\n                  ...prev.club,\n                  position: e.target.value\n                }\n              })),\n              className: \"w-full p-3 mb-4 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 574,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"clubContract\",\n                className: \"text-gray-400\",\n                children: \"Contrato con Club Activo:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 576,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"checkbox\",\n                id: \"clubContract\",\n                checked: modalPlayer.club.contractActive,\n                onChange: e => setModalPlayer(prev => ({\n                  ...prev,\n                  club: {\n                    ...prev.club,\n                    contractActive: e.target.checked\n                  }\n                })),\n                className: \"form-checkbox h-5 w-5 text-blue-600 rounded\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 577,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 575,\n              columnNumber: 17\n            }, this), modalPlayer.club.contractActive && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-1 md:grid-cols-2 gap-4 mt-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"date\",\n                placeholder: \"Fecha de Contrato del Club\",\n                value: modalPlayer.club.contractDate,\n                onChange: e => setModalPlayer(prev => ({\n                  ...prev,\n                  club: {\n                    ...prev.club,\n                    contractDate: e.target.value\n                  }\n                })),\n                className: \"w-full p-3 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 587,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                placeholder: \"Duraci\\xF3n Club (meses)\",\n                value: modalPlayer.club.contractDuration,\n                onChange: e => setModalPlayer(prev => ({\n                  ...prev,\n                  club: {\n                    ...prev.club,\n                    contractDuration: e.target.value\n                  }\n                })),\n                className: \"w-full p-3 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 588,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 586,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              placeholder: \"Salario\",\n              value: modalPlayer.club.salary,\n              onChange: e => setModalPlayer(prev => ({\n                ...prev,\n                club: {\n                  ...prev.club,\n                  salary: e.target.value\n                }\n              })),\n              className: \"w-full p-3 mt-4 mb-4 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 591,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              placeholder: \"Comisi\\xF3n (%)\",\n              value: modalPlayer.club.commissionPercentage,\n              onChange: e => setModalPlayer(prev => ({\n                ...prev,\n                club: {\n                  ...prev.club,\n                  commissionPercentage: e.target.value\n                }\n              })),\n              className: \"w-full p-3 mb-4 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 592,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              placeholder: \"Monto Fijo de Comisi\\xF3n\",\n              value: modalPlayer.club.commissionFixed,\n              onChange: e => setModalPlayer(prev => ({\n                ...prev,\n                club: {\n                  ...prev.club,\n                  commissionFixed: e.target.value\n                }\n              })),\n              className: \"w-full p-3 mb-4 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 593,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"url\",\n              placeholder: \"URL Perfil Transfermarkt\",\n              value: modalPlayer.club.transfermarktProfile,\n              onChange: e => setModalPlayer(prev => ({\n                ...prev,\n                club: {\n                  ...prev.club,\n                  transfermarktProfile: e.target.value\n                }\n              })),\n              className: \"w-full p-3 mb-4 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 594,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Valoraci\\xF3n Transfermarkt\",\n              value: modalPlayer.club.transfermarktValuation,\n              onChange: e => setModalPlayer(prev => ({\n                ...prev,\n                club: {\n                  ...prev.club,\n                  transfermarktValuation: e.target.value\n                }\n              })),\n              className: \"w-full p-3 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 595,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 571,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              className: \"text-lg font-medium text-gray-300 mb-3\",\n              children: \"Otros\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 599,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Direcci\\xF3n\",\n              value: modalPlayer.other.address,\n              onChange: e => setModalPlayer(prev => ({\n                ...prev,\n                other: {\n                  ...prev.other,\n                  address: e.target.value\n                }\n              })),\n              className: \"w-full p-3 mb-4 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 600,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"tel\",\n              placeholder: \"Tel\\xE9fono\",\n              value: modalPlayer.other.phone,\n              onChange: e => setModalPlayer(prev => ({\n                ...prev,\n                other: {\n                  ...prev.other,\n                  phone: e.target.value\n                }\n              })),\n              className: \"w-full p-3 mb-4 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 601,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"email\",\n              placeholder: \"Correo Electr\\xF3nico de Contacto\",\n              value: modalPlayer.other.email,\n              onChange: e => setModalPlayer(prev => ({\n                ...prev,\n                other: {\n                  ...prev.other,\n                  email: e.target.value\n                }\n              })),\n              className: \"w-full p-3 mb-4 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 602,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"url\",\n              placeholder: \"URL de Instagram\",\n              value: modalPlayer.other.instagram,\n              onChange: e => setModalPlayer(prev => ({\n                ...prev,\n                other: {\n                  ...prev.other,\n                  instagram: e.target.value\n                }\n              })),\n              className: \"w-full p-3 mb-4 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 603,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-400 mb-2\",\n                children: \"Fotos (m\\xE1x. 3):\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 605,\n                columnNumber: 19\n              }, this), modalPlayer.other.photoUrls && modalPlayer.other.photoUrls.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex flex-wrap gap-2 mb-2\",\n                children: modalPlayer.other.photoUrls.map((url, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"relative w-20 h-20 rounded-xl overflow-hidden border border-gray-600\",\n                  children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                    src: url,\n                    alt: `Vista previa ${idx + 1}`,\n                    className: \"w-full h-full object-cover\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 610,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => {\n                      setModalPlayer(prev => {\n                        const newPhotoUrls = prev.other.photoUrls.filter((_, i) => i !== idx);\n                        return {\n                          ...prev,\n                          other: {\n                            ...prev.other,\n                            photoUrls: newPhotoUrls\n                          }\n                        };\n                      });\n                    },\n                    className: \"absolute top-1 right-1 bg-red-600 hover:bg-red-700 text-white rounded-full p-1 text-xs\",\n                    title: \"Eliminar foto existente\",\n                    children: \"X\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 611,\n                    columnNumber: 27\n                  }, this)]\n                }, idx, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 609,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 607,\n                columnNumber: 21\n              }, this), [0, 1, 2].map(index => /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"file\",\n                accept: \"image/*\",\n                onChange: e => handlePhotoFileChange(e, index),\n                className: \"w-full text-white text-sm file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-purple-500 file:text-white hover:file:bg-purple-600\"\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 628,\n                columnNumber: 21\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 604,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-400 mb-2\",\n                children: \"Enlaces de Video:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 632,\n                columnNumber: 19\n              }, this), modalPlayer.other.videoLinks.map((link, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center mb-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"url\",\n                  placeholder: `Enlace de Video ${index + 1}`,\n                  value: link,\n                  onChange: e => handleVideoLinkChange(e, index),\n                  className: \"w-full p-3 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 635,\n                  columnNumber: 23\n                }, this), modalPlayer.other.videoLinks.length > 1 && /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => removeVideoLinkField(index),\n                  className: \"bg-red-600 hover:bg-red-700 text-white p-2 rounded-full transition-colors duration-200 ml-4\",\n                  children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                    xmlns: \"http://www.w3.org/2000/svg\",\n                    className: \"h-4 w-4\",\n                    fill: \"none\",\n                    viewBox: \"0 0 24 24\",\n                    stroke: \"currentColor\",\n                    children: /*#__PURE__*/_jsxDEV(\"path\", {\n                      strokeLinecap: \"round\",\n                      strokeLinejoin: \"round\",\n                      strokeWidth: 2,\n                      d: \"M6 18L18 6M6 6l12 12\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 648,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 647,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 643,\n                  columnNumber: 25\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 634,\n                columnNumber: 21\n              }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: addVideoLinkField,\n                className: \"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full text-sm mt-2 transition-all duration-300 transform hover:scale-105\",\n                children: \"Agregar Enlace de Video\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 654,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 631,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 598,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 541,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleSavePlayer,\n          className: \"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl transition-all duration-300 shadow-lg transform hover:scale-105\",\n          children: editingPlayer ? 'Guardar Cambios' : 'Crear Jugador'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 663,\n          columnNumber: 13\n        }, this), editingPlayer && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            var _editingPlayer$agency, _editingPlayer$other2;\n            return handleDeletePlayer(editingPlayer.id, (_editingPlayer$agency = editingPlayer.agency) === null || _editingPlayer$agency === void 0 ? void 0 : _editingPlayer$agency.contractPdfUrl, (_editingPlayer$other2 = editingPlayer.other) === null || _editingPlayer$other2 === void 0 ? void 0 : _editingPlayer$other2.photoUrls);\n          },\n          className: \"w-full bg-red-600 hover:bg-red-700 text-white font-bold py-3 rounded-xl transition-all duration-300 shadow-lg mt-4 transform hover:scale-105\",\n          children: \"Eliminar Jugador\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 670,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 517,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 516,\n      columnNumber: 9\n    }, this), players.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-gray-400 text-center mt-8\",\n      children: \"No hay jugadores registrados. Agrega uno para empezar.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 681,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"overflow-x-auto bg-gray-800 rounded-3xl shadow-xl border border-gray-700\",\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"min-w-full divide-y divide-gray-700\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          className: \"bg-gray-700\",\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              scope: \"col\",\n              className: \"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider\",\n              children: \"Nombre\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 687,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              scope: \"col\",\n              className: \"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider\",\n              children: \"Club\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 688,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              scope: \"col\",\n              className: \"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider\",\n              children: \"Posici\\xF3n\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 689,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              scope: \"col\",\n              className: \"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider\",\n              children: \"Balance Personal\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 690,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              scope: \"col\",\n              className: \"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider\",\n              children: \"Vencimiento Contrato\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 691,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              scope: \"col\",\n              className: \"px-6 py-3 text-right text-xs font-medium text-gray-300 uppercase tracking-wider\",\n              children: \"Acciones\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 692,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 686,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 685,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          className: \"bg-gray-800 divide-y divide-gray-700\",\n          children: players.map(player => {\n            var _player$club, _player$club2;\n            const contractExpiringSoon = player.agency.contractActive && isExpiringSoon(player.agency.contractDate, player.agency.contractDuration);\n            return /*#__PURE__*/_jsxDEV(\"tr\", {\n              className: \"hover:bg-gray-700 transition-colors duration-150\",\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"px-6 py-4 whitespace-nowrap\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm font-medium text-white\",\n                  children: player.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 701,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs text-gray-400\",\n                  children: [\"RUT: \", player.rut]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 702,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 700,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"px-6 py-4 whitespace-nowrap\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm text-gray-300\",\n                  children: ((_player$club = player.club) === null || _player$club === void 0 ? void 0 : _player$club.name) || 'N/A'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 705,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 704,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"px-6 py-4 whitespace-nowrap\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm text-gray-300\",\n                  children: ((_player$club2 = player.club) === null || _player$club2 === void 0 ? void 0 : _player$club2.position) || 'N/A'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 708,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 707,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"px-6 py-4 whitespace-nowrap\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `text-sm font-bold ${getPlayerBalance(player.id) >= 0 ? 'text-green-500' : 'text-red-500'}`,\n                  children: [\"$\", getPlayerBalance(player.id).toFixed(2)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 711,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 710,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"px-6 py-4 whitespace-nowrap\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `text-sm ${contractExpiringSoon ? 'text-red-400 font-semibold' : 'text-gray-300'}`,\n                  children: [player.agency.contractActive ? getContractExpirationDate(player.agency.contractDate, player.agency.contractDuration) : 'N/A', contractExpiringSoon && /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"ml-2 px-2 py-0.5 text-xs font-semibold text-white bg-orange-500 rounded-full\",\n                    children: \"\\xA1Alerta!\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 719,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 716,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 715,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => {\n                    setShowAddPlayerModal(true);\n                    setEditingPlayer(player);\n                  },\n                  className: \"text-blue-500 hover:text-blue-700 px-3 py-1 rounded-full border border-blue-500 hover:border-blue-700 transition-colors duration-200\",\n                  children: \"Editar\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 726,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 725,\n                columnNumber: 21\n              }, this)]\n            }, player.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 699,\n              columnNumber: 19\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 695,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 684,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 683,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 501,\n    columnNumber: 5\n  }, this);\n};\n\n// Finance management component.\n_s2(PlayerManager, \"gIhrKBQ5jD02Q1MqasNvD8H0guQ=\");\n_c4 = PlayerManager;\nconst FinanceManager = ({\n  db,\n  userId,\n  currentAppId\n}) => {\n  _s3();\n  const [finances, setFinances] = useState([]);\n  const [players, setPlayers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [newTransaction, setNewTransaction] = useState({\n    playerId: '',\n    type: 'income',\n    description: '',\n    amount: ''\n  });\n  const getFinancesCollectionPath = appId => {\n    // Usamos el path de datos pÃºblicos para la colaboraciÃ³n\n    return appId ? `artifacts/${appId}/public/data/finances` : `public/data/finances`;\n  };\n  const getPlayersCollectionPath = appId => {\n    // Usamos el path de datos pÃºblicos para la colaboraciÃ³n\n    return appId ? `artifacts/${appId}/public/data/players` : `public/data/players`;\n  };\n  useEffect(() => {\n    if (!db) return;\n    setLoading(true);\n    setError(null);\n    const playersCollectionRef = collection(db, getPlayersCollectionPath(currentAppId));\n    const unsubscribePlayers = onSnapshot(playersCollectionRef, snapshot => {\n      const playersData = snapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      setPlayers(playersData);\n    }, err => {\n      console.error(\"Error al cargar jugadores para finanzas:\", err);\n      setError(\"No se pudieron cargar los jugadores para finanzas.\");\n    });\n    const financesCollectionRef = collection(db, getFinancesCollectionPath(currentAppId));\n    const unsubscribeFinances = onSnapshot(financesCollectionRef, snapshot => {\n      const financesData = snapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      setFinances(financesData);\n      setLoading(false);\n    }, err => {\n      console.error(\"Error al cargar finanzas:\", err);\n      setError(\"No se pudieron cargar las finanzas.\");\n      setLoading(false);\n    });\n    return () => {\n      unsubscribePlayers();\n      unsubscribeFinances();\n    };\n  }, [db, currentAppId]);\n  const handleAddTransaction = async () => {\n    if (!newTransaction.playerId || !newTransaction.description || !newTransaction.amount) {\n      setError(\"Por favor, completa todos los campos de la transacciÃ³n.\");\n      return;\n    }\n    try {\n      await addDoc(collection(db, getFinancesCollectionPath(currentAppId)), {\n        ...newTransaction,\n        amount: parseFloat(newTransaction.amount)\n      });\n      setNewTransaction({\n        playerId: '',\n        type: 'income',\n        description: '',\n        amount: ''\n      });\n      setError(null);\n    } catch (e) {\n      console.error(\"Error al agregar transacciÃ³n:\", e);\n      setError(\"No se pudo agregar la transacciÃ³n.\");\n    }\n  };\n  const handleDeleteTransaction = async id => {\n    try {\n      const financeDocRef = doc(db, getFinancesCollectionPath(currentAppId), id);\n      await deleteDoc(financeDocRef);\n    } catch (e) {\n      console.error(\"Error al eliminar transacciÃ³n:\", e);\n      setError(\"No se pudo eliminar la transacciÃ³n.\");\n    }\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"text-white text-center mt-8\",\n    children: \"Cargando datos financieros...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 822,\n    columnNumber: 23\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-red-800 text-red-200 p-4 rounded-lg text-center mx-4 mt-4\",\n    children: error\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 823,\n    columnNumber: 21\n  }, this);\n  const playerMap = players.reduce((map, player) => {\n    map[player.id] = player.name;\n    return map;\n  }, {});\n  const totalIncome = finances.filter(t => t.type === 'income').reduce((sum, t) => sum + t.amount, 0);\n  const totalExpenses = finances.filter(t => t.type === 'expense').reduce((sum, t) => sum + t.amount, 0);\n  const totalBalance = totalIncome - totalExpenses;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-4 md:p-8 bg-gray-900 text-white min-h-screen\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600 mb-6\",\n      children: \"Gesti\\xF3n de Finanzas\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 842,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8 text-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-gray-800 p-6 rounded-3xl shadow-xl border border-gray-700\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-xl text-green-400 font-semibold\",\n          children: \"Ingresos Totales\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 846,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-2xl font-bold\",\n          children: [\"$\", totalIncome.toFixed(2)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 847,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 845,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-gray-800 p-6 rounded-3xl shadow-xl border border-gray-700\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-xl text-red-400 font-semibold\",\n          children: \"Gastos Totales\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 850,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-2xl font-bold\",\n          children: [\"$\", totalExpenses.toFixed(2)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 851,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 849,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-gray-800 p-6 rounded-3xl shadow-xl border border-gray-700\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-xl text-blue-400 font-semibold\",\n          children: \"Balance Total\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 854,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-2xl font-bold\",\n          children: [\"$\", totalBalance.toFixed(2)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 855,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 853,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 844,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-gray-800 p-6 rounded-3xl shadow-xl border border-gray-700 mb-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-2xl font-bold text-white mb-4\",\n        children: \"Nueva Transacci\\xF3n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 860,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-red-400 text-sm mb-4\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 861,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"select\", {\n          value: newTransaction.playerId,\n          onChange: e => setNewTransaction({\n            ...newTransaction,\n            playerId: e.target.value\n          }),\n          className: \"w-full p-3 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-purple-500\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Selecciona un jugador\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 868,\n            columnNumber: 13\n          }, this), players.map(player => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: player.id,\n            children: player.name\n          }, player.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 870,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 863,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: newTransaction.type,\n          onChange: e => setNewTransaction({\n            ...newTransaction,\n            type: e.target.value\n          }),\n          className: \"w-full p-3 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-purple-500\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"income\",\n            children: \"Ingreso\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 878,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"expense\",\n            children: \"Gasto\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 879,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 873,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Descripci\\xF3n\",\n          value: newTransaction.description,\n          onChange: e => setNewTransaction({\n            ...newTransaction,\n            description: e.target.value\n          }),\n          className: \"w-full p-3 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-purple-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 881,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          placeholder: \"Monto\",\n          value: newTransaction.amount,\n          onChange: e => setNewTransaction({\n            ...newTransaction,\n            amount: e.target.value\n          }),\n          className: \"w-full p-3 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-purple-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 888,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 862,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleAddTransaction,\n        className: \"w-full mt-6 bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl transition-all duration-300 shadow-lg transform hover:scale-105\",\n        children: \"Agregar Transacci\\xF3n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 896,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 859,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-gray-800 p-6 rounded-3xl shadow-xl border border-gray-700\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-2xl font-bold text-white mb-4\",\n        children: \"Historial de Transacciones\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 905,\n        columnNumber: 9\n      }, this), finances.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-400 text-center\",\n        children: \"No hay transacciones registradas.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 907,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-4\",\n        children: finances.map(transaction => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gray-700 p-4 rounded-xl flex justify-between items-center transition-transform hover:scale-105 duration-200\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"font-semibold text-lg text-white\",\n              children: transaction.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 913,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-400\",\n              children: [\"Jugador: \", playerMap[transaction.playerId] || 'No asignado']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 914,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 912,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `font-bold text-xl ml-4 ${transaction.type === 'income' ? 'text-green-400' : 'text-red-400'}`,\n            children: [transaction.type === 'income' ? '+' : '-', \" $\", transaction.amount.toFixed(2)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 916,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleDeleteTransaction(transaction.id),\n            className: \"bg-red-600 hover:bg-red-700 text-white p-2 rounded-full transition-colors duration-200 ml-4\",\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              xmlns: \"http://www.w3.org/2000/svg\",\n              className: \"h-4 w-4\",\n              fill: \"none\",\n              viewBox: \"0 0 24 24\",\n              stroke: \"currentColor\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: 2,\n                d: \"M6 18L18 6M6 6l12 12\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 924,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 923,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 919,\n            columnNumber: 17\n          }, this)]\n        }, transaction.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 911,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 909,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 904,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 841,\n    columnNumber: 5\n  }, this);\n};\n\n// Other view component.\n_s3(FinanceManager, \"cSl+qT6HmWra+02YWNdvqvoizaM=\");\n_c5 = FinanceManager;\nconst OtherView = ({\n  db,\n  currentAppId\n}) => {\n  _s4();\n  const [players, setPlayers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  // Helper to build the player collection path safely.\n  const getPlayersCollectionPath = appId => {\n    return appId ? `artifacts/${appId}/public/data/players` : `public/data/players`;\n  };\n  // Helper to format the date to DD/MM/YYYY, fixing the one-day shift issue.\n  const formatDateForDisplay = dateString => {\n    if (!dateString) return 'N/A';\n    const parts = dateString.split('-');\n    // Ensure the date is created using local time, not UTC.\n    // This prevents the timezone shift.\n    const date = new Date(parseInt(parts[0]), parseInt(parts[1]) - 1, parseInt(parts[2]));\n    return date.toLocaleDateString('es-ES', {\n      day: '2-digit',\n      month: '2-digit',\n      year: 'numeric'\n    });\n  };\n  useEffect(() => {\n    if (!db) return;\n    setLoading(true);\n    setError(null);\n    const playersCollectionRef = collection(db, getPlayersCollectionPath(currentAppId));\n    const unsubscribe = onSnapshot(playersCollectionRef, snapshot => {\n      const playersData = snapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      setPlayers(playersData);\n      setLoading(false);\n    }, err => {\n      console.error(\"Error al cargar jugadores para la vista 'Otros':\", err);\n      setError(\"No se pudieron cargar los datos de los jugadores.\");\n      setLoading(false);\n    });\n    return () => unsubscribe();\n  }, [db, currentAppId]);\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"text-white text-center mt-8\",\n    children: \"Cargando datos...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 974,\n    columnNumber: 25\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-red-800 text-red-200 p-4 rounded-lg text-center mx-4 mt-4\",\n    children: error\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 975,\n    columnNumber: 23\n  }, this);\n  const months = [\"Enero\", \"Febrero\", \"Marzo\", \"Abril\", \"Mayo\", \"Junio\", \"Julio\", \"Agosto\", \"Septiembre\", \"Octubre\", \"Noviembre\", \"Diciembre\"];\n  // Filter players who have a birth date and sort them by month and then day\n  const playersWithBirthdays = players.filter(p => p.birthDate);\n  const sortedPlayers = playersWithBirthdays.sort((a, b) => {\n    const dateA = new Date(a.birthDate + 'T00:00:00'); // Add T00:00:00 to force local time\n    const dateB = new Date(b.birthDate + 'T00:00:00');\n    const monthA = dateA.getMonth();\n    const monthB = dateB.getMonth();\n    const dayA = dateA.getDate();\n    const dayB = dateB.getDate();\n    if (monthA !== monthB) {\n      return monthA - monthB;\n    }\n    return dayA - dayB;\n  });\n  const groupedBirthdays = sortedPlayers.reduce((acc, player) => {\n    const date = new Date(player.birthDate + 'T00:00:00');\n    const monthIndex = date.getMonth();\n    const monthName = months[monthIndex];\n    if (!acc[monthName]) {\n      acc[monthName] = [];\n    }\n    acc[monthName].push(player);\n    return acc;\n  }, {});\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-4 md:p-8 bg-gray-900 text-white min-h-screen\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600 mb-6\",\n      children: \"Otros\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1004,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-gray-800 p-6 rounded-3xl shadow-xl border border-gray-700 mb-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-2xl font-bold text-white mb-4\",\n        children: \"Pr\\xF3ximos Cumplea\\xF1os\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1007,\n        columnNumber: 17\n      }, this), Object.keys(groupedBirthdays).length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-400\",\n        children: \"No hay cumplea\\xF1os registrados.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1009,\n        columnNumber: 21\n      }, this) : Object.entries(groupedBirthdays).map(([month, playersInMonth]) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"text-xl font-semibold text-blue-400 mb-2\",\n          children: month\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1013,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-2\",\n          children: playersInMonth.map(player => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between p-3 bg-gray-700 rounded-xl transition-all duration-200 hover:bg-gray-600\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                xmlns: \"http://www.w3.org/2000/svg\",\n                className: \"h-6 w-6 text-yellow-300 mr-3\",\n                fill: \"none\",\n                viewBox: \"0 0 24 24\",\n                stroke: \"currentColor\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  strokeLinecap: \"round\",\n                  strokeLinejoin: \"round\",\n                  strokeWidth: 2,\n                  d: \"M8 7V3m8 4V3m-9 8h8m-11 0h12a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1019,\n                  columnNumber: 49\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1018,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-white\",\n                children: player.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1021,\n                columnNumber: 45\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1017,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-medium text-gray-300\",\n              children: formatDateForDisplay(player.birthDate)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1023,\n              columnNumber: 41\n            }, this)]\n          }, player.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1016,\n            columnNumber: 37\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1014,\n          columnNumber: 29\n        }, this)]\n      }, month, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1012,\n        columnNumber: 25\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1006,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-gray-800 p-6 rounded-3xl shadow-xl border border-gray-700\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-2xl font-bold text-white mb-4\",\n        children: \"Secci\\xF3n Pendiente\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1033,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-400\",\n        children: \"Esta secci\\xF3n se puede utilizar para futuras funcionalidades. \\xA1Av\\xEDsame si tienes m\\xE1s ideas!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1034,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1032,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1003,\n    columnNumber: 9\n  }, this);\n};\n_s4(OtherView, \"gI5IvuAkxLm+sIrB6oQgpFtvEsI=\");\n_c6 = OtherView;\nconst App = () => {\n  _s5();\n  const [db, setDb] = useState(null);\n  const [auth, setAuth] = useState(null);\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [userId, setUserId] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [currentPage, setCurrentPage] = useState('Home');\n  useEffect(() => {\n    // Enable debug logs for Firebase, this is useful for debugging issues\n    setLogLevel('debug');\n    const initializeFirebase = async () => {\n      try {\n        // Log the received configuration for debugging purposes.\n        console.log(\"ConfiguraciÃ³n de Firebase recibida:\", firebaseConfig);\n        if (!firebaseConfig.apiKey) {\n          console.error(\"Firebase Initialization Error: API Key not found in configuration.\");\n          setError(\"No se pudo iniciar Firebase. La clave de API es invÃ¡lida o no se proporcionÃ³. Por favor, asegÃºrate de que el entorno de la plataforma la estÃ© inyectando correctamente.\");\n          setLoading(false);\n          return;\n        }\n        const app = initializeApp(firebaseConfig);\n        const authInstance = getAuth(app);\n        const dbInstance = getFirestore(app);\n        const storageInstance = getStorage(app);\n        setAuth(authInstance);\n        setDb(dbInstance);\n        // Handle authentication state\n        const unsubscribe = onAuthStateChanged(authInstance, user => {\n          if (user) {\n            setIsAuthenticated(true);\n            setUserId(user.uid);\n          } else {\n            setIsAuthenticated(false);\n            setUserId(null); // Ensure userId is null if not authenticated\n          }\n          setLoading(false); // Always stop loading after checking authentication\n        });\n        // Clean up the auth listener\n        return () => unsubscribe();\n      } catch (e) {\n        console.error(\"Error initializing Firebase:\", e);\n        setError(`No se pudo iniciar Firebase. Revisa si tu configuraciÃ³n de Firebase es correcta. Error: ${e.message}`);\n        setLoading(false);\n      }\n    };\n    initializeFirebase();\n  }, []); // Empty dependencies to run only once on component mount\n  const handleLoginSuccess = () => {\n    // onAuthStateChanged will fire and update authentication status\n    // We don't need to do anything here beyond ensuring the flow continues\n  };\n  const handleLogout = async () => {\n    try {\n      await signOut(auth);\n      setUserId(null); // Clear userId\n      setCurrentPage('Home');\n    } catch (e) {\n      console.error(\"Error al cerrar sesiÃ³n:\", e);\n      setError(\"No se pudo cerrar la sesiÃ³n correctamente.\");\n    }\n  };\n  const renderContent = () => {\n    if (loading) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-center min-h-screen bg-gradient-to-br from-gray-900 to-gray-700\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-gray-300\",\n          children: \"Cargando aplicaci\\xF3n...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1107,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1106,\n        columnNumber: 9\n      }, this);\n    }\n    if (error) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-center min-h-screen bg-gradient-to-br from-gray-900 to-gray-700 p-4 text-center\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-red-800 border border-red-600 text-red-200 px-6 py-4 rounded-lg shadow-xl w-full max-w-lg\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            className: \"font-bold text-xl block mb-2\",\n            children: \"Error Cr\\xEDtico:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1115,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-lg\",\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1116,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm mt-4\",\n            children: \"Por favor, revisa la consola para m\\xE1s detalles t\\xE9cnicos sobre el problema de inicializaci\\xF3n de Firebase.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1117,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1114,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1113,\n        columnNumber: 9\n      }, this);\n    }\n    if (!isAuthenticated) {\n      // Pass onLoginSuccess so LoginScreen can notify App\n      return /*#__PURE__*/_jsxDEV(LoginScreen, {\n        auth: auth,\n        onLoginSuccess: handleLoginSuccess\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1124,\n        columnNumber: 14\n      }, this);\n    }\n    switch (currentPage) {\n      case 'Home':\n        return /*#__PURE__*/_jsxDEV(HomeView, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1128,\n          columnNumber: 16\n        }, this);\n      case 'PlayerManagement':\n        return /*#__PURE__*/_jsxDEV(PlayerManager, {\n          db: db,\n          userId: userId,\n          currentAppId: currentAppId\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1130,\n          columnNumber: 16\n        }, this);\n      case 'FinanceManagement':\n        return /*#__PURE__*/_jsxDEV(FinanceManager, {\n          db: db,\n          userId: userId,\n          currentAppId: currentAppId\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1132,\n          columnNumber: 16\n        }, this);\n      case 'Other':\n        return /*#__PURE__*/_jsxDEV(OtherView, {\n          db: db,\n          currentAppId: currentAppId\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1134,\n          columnNumber: 16\n        }, this);\n      default:\n        return /*#__PURE__*/_jsxDEV(HomeView, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1136,\n          columnNumber: 16\n        }, this);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gradient-to-br from-gray-900 to-gray-700 font-inter antialiased text-gray-100\",\n    children: [isAuthenticated && /*#__PURE__*/_jsxDEV(Navbar, {\n      setCurrentPage: setCurrentPage,\n      handleLogout: handleLogout\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1141,\n      columnNumber: 27\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"container mx-auto py-8\",\n      children: renderContent()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1142,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1140,\n    columnNumber: 5\n  }, this);\n};\n_s5(App, \"VnbxB5IGqAId+A4Ge7miS+gf39M=\");\n_c7 = App;\nexport default App;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7;\n$RefreshReg$(_c, \"Navbar\");\n$RefreshReg$(_c2, \"HomeView\");\n$RefreshReg$(_c3, \"LoginScreen\");\n$RefreshReg$(_c4, \"PlayerManager\");\n$RefreshReg$(_c5, \"FinanceManager\");\n$RefreshReg$(_c6, \"OtherView\");\n$RefreshReg$(_c7, \"App\");","map":{"version":3,"names":["React","useEffect","useState","initializeApp","getAuth","signInAnonymously","onAuthStateChanged","signOut","createUserWithEmailAndPassword","signInWithEmailAndPassword","signInWithCustomToken","getFirestore","collection","onSnapshot","deleteDoc","addDoc","updateDoc","doc","setLogLevel","getStorage","ref","uploadBytes","getDownloadURL","deleteObject","jsxDEV","_jsxDEV","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","currentAppId","__app_id","initialAuthToken","__initial_auth_token","app","auth","db","storage","Navbar","setCurrentPage","handleLogout","className","children","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","onClick","xmlns","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","_c","HomeView","_c2","LoginScreen","onLoginSuccess","_s","email","setEmail","password","setPassword","isRegistering","setIsRegistering","errorMessage","setErrorMessage","handleAuth","error","console","userMessage","code","type","placeholder","value","onChange","e","target","_c3","PlayerManager","userId","_s2","players","setPlayers","finances","setFinances","loading","setLoading","setError","showAddPlayerModal","setShowAddPlayerModal","editingPlayer","setEditingPlayer","modalPlayer","setModalPlayer","rut","name","birthDate","skillFoot","shoeSize","gloveSize","height","weight","agency","incorporationDate","contractActive","contractDate","contractDuration","contractPdfUrl","contractPdfFile","club","position","salary","commissionPercentage","commissionFixed","transfermarktProfile","transfermarktValuation","other","address","phone","instagram","photos","photoUrls","videoLinks","getPlayersCollectionPath","getFinancesCollectionPath","getContractExpirationDate","date","Date","setMonth","getMonth","parseInt","day","String","getDate","padStart","month","year","getFullYear","isExpiringSoon","expirationDate","today","sixMonthsFromNow","playersCollectionRef","unsubscribePlayers","snapshot","playersData","docs","map","id","data","err","financesCollectionRef","unsubscribeFinances","financesData","getPlayerBalance","playerId","playerTransactions","filter","t","income","reduce","sum","amount","expenses","handleDeletePlayer","confirmed","Promise","resolve","confirmBox","document","createElement","innerHTML","body","appendChild","getElementById","onclick","removeChild","playerDocRef","fileRef","catch","warn","url","message","handlePdfFileChange","files","prev","handlePhotoFileChange","index","Array","from","updatedPhotos","handleVideoLinkChange","updatedVideoLinks","addVideoLinkField","removeVideoLinkField","_","i","handleSavePlayer","_editingPlayer$other","pdfUrl","file","storageRef","getTime","length","photoFile","photoStorageRef","photoSnapshot","push","playerToSave","link","trim","htmlFor","checked","accept","href","rel","idx","newPhotoUrls","title","_editingPlayer$agency","_editingPlayer$other2","scope","player","_player$club","_player$club2","contractExpiringSoon","toFixed","_c4","FinanceManager","_s3","newTransaction","setNewTransaction","description","handleAddTransaction","parseFloat","handleDeleteTransaction","financeDocRef","playerMap","totalIncome","totalExpenses","totalBalance","transaction","_c5","OtherView","_s4","formatDateForDisplay","dateString","parts","split","toLocaleDateString","unsubscribe","months","playersWithBirthdays","p","sortedPlayers","sort","a","b","dateA","dateB","monthA","monthB","dayA","dayB","groupedBirthdays","acc","monthIndex","monthName","Object","keys","entries","playersInMonth","_c6","App","_s5","setDb","setAuth","isAuthenticated","setIsAuthenticated","setUserId","currentPage","initializeFirebase","log","authInstance","dbInstance","storageInstance","user","uid","handleLoginSuccess","renderContent","_c7","$RefreshReg$"],"sources":["/Volumes/Respaldos/Desarrollo/dev/Agencia/Frontend/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { initializeApp } from 'firebase/app';\nimport { getAuth, signInAnonymously, onAuthStateChanged, signOut, createUserWithEmailAndPassword, signInWithEmailAndPassword, signInWithCustomToken } from 'firebase/auth';\nimport { getFirestore, collection, onSnapshot, deleteDoc, addDoc, updateDoc, doc, setLogLevel } from 'firebase/firestore';\nimport { getStorage, ref, uploadBytes, getDownloadURL, deleteObject } from 'firebase/storage';\n\n// Asume que Tailwind CSS estÃ¡ disponible globalmente, como se requiere en el entorno.\n\n// =================================================================================\n// ðŸ”¥ CONFIGURACIÃ“N DE FIREBASE (TU CÃ“DIGO)\n// Se usa la configuraciÃ³n que proporcionaste directamente.\n// =================================================================================\nconst firebaseConfig = {\n   apiKey: \"AIzaSyC7zJ6jb9FYIUVfNzLVPp43TFNb11KDPqw\",\n   authDomain: \"agencia-futbol.firebaseapp.com\",\n   projectId: \"agencia-futbol\",\n   storageBucket: \"agencia-futbol.firebasestorage.app\",\n   messagingSenderId: \"541080953122\",\n   appId: \"1:541080953122:web:ddb16c0083768d4c4c057b\",\n   measurementId: \"G-VE70EW7FDC\"\n};\n\n// No modifiques estas variables. Se proporcionan desde el entorno.\nconst currentAppId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';\nconst initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;\n\n// Inicializa Firebase con la configuraciÃ³n proporcionada.\nlet app;\nlet auth;\nlet db;\nlet storage;\n\nif (firebaseConfig) {\n  app = initializeApp(firebaseConfig);\n  auth = getAuth(app);\n  db = getFirestore(app);\n  storage = getStorage(app);\n  setLogLevel('debug');\n}\n\n// =================================================================================\n// COMPONENTES Y LÃ“GICA DE LA APLICACIÃ“N\n// =================================================================================\n\n// Navbar component for navigation.\nconst Navbar = ({ setCurrentPage, handleLogout }) => {\n  return (\n    <nav className=\"bg-gray-900 p-4 shadow-xl rounded-b-3xl\">\n      <div className=\"container mx-auto flex flex-wrap justify-between items-center\">\n        {/* Logo and company name */}\n        <div className=\"flex items-center space-x-2\">\n          <img\n            src=\"https://placehold.co/50x50/cccccc/333333?text=Logo\" // Placeholder for the logo\n            alt=\"Nueva Futbol Chile SpA Logo\"\n            className=\"h-10 w-10 rounded-full object-cover border border-gray-600\"\n          />\n          <span className=\"text-white text-xl font-extrabold uppercase hidden sm:block\">Nueva Futbol Chile SpA</span>\n        </div>\n        {/* Navigation links */}\n        <div className=\"flex flex-grow justify-center sm:justify-end mt-4 sm:mt-0 space-x-2 sm:space-x-4\">\n          <button onClick={() => setCurrentPage('Home')} className=\"text-gray-300 hover:text-white transition-colors duration-200 p-2 rounded-lg flex items-center space-x-1\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6\" />\n            </svg>\n            <span className=\"hidden md:inline\">Inicio</span>\n          </button>\n          <button onClick={() => setCurrentPage('PlayerManagement')} className=\"text-gray-300 hover:text-white transition-colors duration-200 p-2 rounded-lg flex items-center space-x-1\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 20h2a2 2 0 002-2V7a2 2 0 00-2-2h-2V3a1 1 0 00-2 0v2H7V3a1 1 0 00-2 0v2H3a2 2 0 00-2 2v11a2 2 0 002 2h2m0-6h14m-8 6h4\" />\n            </svg>\n            <span className=\"hidden md:inline\">Jugadores</span>\n          </button>\n          <button onClick={() => setCurrentPage('FinanceManagement')} className=\"text-gray-300 hover:text-white transition-colors duration-200 p-2 rounded-lg flex items-center space-x-1\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8c1.657 0 3 1.343 3 3s-1.343 3-3 3S9 12.657 9 11s1.343-3 3-3z\" />\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 18c-4.418 0-8-3.582-8-8s3.582-8 8-8 8 3.582 8 8-3.582 8-8 8z\" />\n            </svg>\n            <span className=\"hidden md:inline\">Finanzas</span>\n          </button>\n          <button onClick={() => setCurrentPage('Other')} className=\"text-gray-300 hover:text-white transition-colors duration-200 p-2 rounded-lg flex items-center space-x-1\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 20l-5.447-2.724A2 2 0 013 15.618V6.382a2 2 0 011.553-1.854L9 2m0 18v-8.5a2 2 0 01.553-1.854L15 9m-6 10.5V15a2 2 0 00-2-2H4\" />\n            </svg>\n            <span className=\"hidden md:inline\">Otros</span>\n          </button>\n        </div>\n        {/* Logout button */}\n        <button onClick={handleLogout} className=\"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-full transition-all duration-200 shadow-lg flex items-center space-x-2\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1m-4-1v1m-2-1v1m10 0v-1m-2 1v-1m-2-1v1m-4-1v1m-2-1v1M7 8h10a2 2 0 012 2v10a2 2 0 01-2 2H7a2 2 0 01-2-2V10a2 2 0 012-2z\" />\n          </svg>\n          <span className=\"hidden sm:inline\">Salir</span>\n        </button>\n      </div>\n    </nav>\n  );\n};\n\n// Home view component.\nconst HomeView = () => (\n  <div className=\"flex flex-col items-center justify-center text-center p-8 bg-gray-800 text-gray-200 rounded-3xl shadow-xl m-4 border border-gray-700\">\n    <h1 className=\"text-3xl font-bold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600\">Bienvenido al Panel de AdministraciÃ³n</h1>\n    <p className=\"text-lg text-gray-400\">Selecciona una opciÃ³n del menÃº para comenzar.</p>\n  </div>\n);\n\n// Login screen component.\nconst LoginScreen = ({ auth, onLoginSuccess }) => {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [isRegistering, setIsRegistering] = useState(false);\n  const [errorMessage, setErrorMessage] = useState('');\n\n  const handleAuth = async () => {\n    if (!auth) {\n        setErrorMessage(\"Firebase no estÃ¡ inicializado.\");\n        return;\n    }\n    try {\n      setErrorMessage('');\n      if (isRegistering) {\n        await createUserWithEmailAndPassword(auth, email, password);\n      } else {\n        await signInWithEmailAndPassword(auth, email, password);\n      }\n      onLoginSuccess(); // Call the login success function\n    } catch (error) {\n      console.error(\"Authentication error:\", error);\n      // Firebase error codes for more user-friendly messages\n      let userMessage = \"Error de autenticaciÃ³n. Por favor, verifica tus credenciales.\";\n      if (error.code === 'auth/invalid-email') {\n        userMessage = \"El formato del correo electrÃ³nico es invÃ¡lido.\";\n      } else if (error.code === 'auth/user-disabled') {\n        userMessage = \"El usuario ha sido deshabilitado.\";\n      } else if (error.code === 'auth/user-not-found' || error.code === 'auth/wrong-password') {\n        userMessage = \"Correo electrÃ³nico o contraseÃ±a incorrectos.\";\n      } else if (error.code === 'auth/email-already-in-use') {\n        userMessage = \"Este correo electrÃ³nico ya estÃ¡ registrado.\";\n      } else if (error.code === 'auth/weak-password') {\n        userMessage = \"La contraseÃ±a debe tener al menos 6 caracteres.\";\n      }\n      setErrorMessage(userMessage);\n    }\n  };\n\n  return (\n    <div className=\"flex items-center justify-center min-h-screen bg-gradient-to-br from-gray-900 to-gray-700 p-4\">\n      <div className=\"bg-gray-800 p-8 rounded-3xl shadow-2xl w-full max-w-md border border-gray-700\">\n        <h2 className=\"text-2xl font-bold text-white text-center mb-6 text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600\">\n          {isRegistering ? 'Crear Cuenta' : 'Iniciar SesiÃ³n'}\n        </h2>\n        {errorMessage && (\n          <div className=\"bg-red-800 border border-red-600 text-red-200 px-4 py-3 rounded-lg relative mb-4 text-center\">\n            <strong className=\"font-bold\">Error:</strong>\n            <span className=\"block sm:inline ml-2\">{errorMessage}</span>\n          </div>\n        )}\n        <input\n          type=\"email\"\n          placeholder=\"Correo electrÃ³nico\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n          className=\"w-full p-3 mb-4 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-purple-500 transition-colors\"\n        />\n        <input\n          type=\"password\"\n          placeholder=\"ContraseÃ±a\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n          className=\"w-full p-3 mb-6 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-purple-500 transition-colors\"\n        />\n        <button\n          onClick={handleAuth}\n          className=\"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl transition-all duration-300 shadow-lg transform hover:scale-105\"\n        >\n          {isRegistering ? 'Registrarse' : 'Ingresar'}\n        </button>\n        <div className=\"mt-4 text-center\">\n          <button\n            onClick={() => setIsRegistering(!isRegistering)}\n            className=\"text-gray-400 hover:text-white transition-colors duration-200 text-sm\"\n          >\n            {isRegistering ? 'Â¿Ya tienes una cuenta? Iniciar SesiÃ³n' : 'Â¿No tienes una cuenta? Registrarse'}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Player management component.\nconst PlayerManager = ({ db, userId, currentAppId }) => {\n  const [players, setPlayers] = useState([]);\n  const [finances, setFinances] = useState([]); // For calculating personal balance\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [showAddPlayerModal, setShowAddPlayerModal] = useState(false);\n  const [editingPlayer, setEditingPlayer] = useState(null); // For editing an existing player\n  const [modalPlayer, setModalPlayer] = useState({ // State for the modal (add/edit)\n    rut: '',\n    name: '',\n    birthDate: '',\n    skillFoot: '',\n    shoeSize: '',\n    gloveSize: '',\n    height: '',\n    weight: '',\n    agency: {\n      incorporationDate: '',\n      contractActive: false,\n      contractDate: '',\n      contractDuration: '',\n      contractPdfUrl: '',\n      contractPdfFile: null,\n    },\n    club: {\n      name: '',\n      position: '',\n      contractActive: false,\n      contractDate: '',\n      contractDuration: '',\n      salary: '',\n      commissionPercentage: '',\n      commissionFixed: '',\n      transfermarktProfile: '',\n      transfermarktValuation: '',\n    },\n    other: {\n      address: '',\n      phone: '',\n      email: '',\n      instagram: '',\n      photos: [null, null, null],\n      photoUrls: [],\n      videoLinks: [''],\n    }\n  });\n\n  const storage = getStorage();\n\n  // Helper to build the player collection path safely.\n  const getPlayersCollectionPath = (appId) => {\n    return appId ? `artifacts/${appId}/public/data/players` : `public/data/players`;\n  };\n\n  // Helper to build the finance collection path safely.\n  const getFinancesCollectionPath = (appId) => {\n    return appId ? `artifacts/${appId}/public/data/finances` : `public/data/finances`;\n  };\n\n  // Function to calculate the contract expiration date.\n  const getContractExpirationDate = (contractDate, contractDuration) => {\n    if (!contractDate || !contractDuration) return 'N/A';\n    const date = new Date(contractDate);\n    date.setMonth(date.getMonth() + parseInt(contractDuration, 10));\n    // Format the date as DD/MM/YYYY\n    const day = String(date.getDate()).padStart(2, '0');\n    const month = String(date.getMonth() + 1).padStart(2, '0'); // Months are 0-indexed\n    const year = date.getFullYear();\n    return `${day}/${month}/${year}`;\n  };\n\n  // Function to check if a contract is expiring within 6 months.\n  const isExpiringSoon = (contractDate, contractDuration) => {\n    if (!contractDate || !contractDuration) return false;\n    const expirationDate = new Date(contractDate);\n    expirationDate.setMonth(expirationDate.getMonth() + parseInt(contractDuration, 10));\n    const today = new Date();\n    const sixMonthsFromNow = new Date();\n    sixMonthsFromNow.setMonth(sixMonthsFromNow.getMonth() + 6);\n    // Check if the expiration date is in the future and within the next 6 months\n    return expirationDate > today && expirationDate <= sixMonthsFromNow;\n  };\n\n  // Effect to fetch players and finances.\n  useEffect(() => {\n    if (!db) return;\n    setLoading(true);\n    setError(null);\n    // Subscribe to changes in the players collection.\n    const playersCollectionRef = collection(db, getPlayersCollectionPath(currentAppId));\n    const unsubscribePlayers = onSnapshot(playersCollectionRef, (snapshot) => {\n      const playersData = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n      setPlayers(playersData);\n    }, (err) => {\n      console.error(\"Error al cargar jugadores:\", err);\n      setError(\"No se pudieron cargar los jugadores.\");\n    });\n    // Subscribe to changes in the finances collection.\n    const financesCollectionRef = collection(db, getFinancesCollectionPath(currentAppId));\n    const unsubscribeFinances = onSnapshot(financesCollectionRef, (snapshot) => {\n      const financesData = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n      setFinances(financesData);\n      setLoading(false);\n    }, (err) => {\n      console.error(\"Error al cargar finanzas de jugadores:\", err);\n      setError(\"No se pudieron cargar las finanzas de los jugadores.\");\n      setLoading(false);\n    });\n    return () => {\n      unsubscribePlayers();\n      unsubscribeFinances();\n    };\n  }, [db, currentAppId]);\n\n  // Function to calculate a player's personal balance.\n  const getPlayerBalance = (playerId) => {\n    if (!playerId || !finances) return 0;\n    const playerTransactions = finances.filter(t => t.playerId === playerId);\n    const income = playerTransactions.filter(t => t.type === 'income').reduce((sum, t) => sum + t.amount, 0);\n    const expenses = playerTransactions.filter(t => t.type === 'expense').reduce((sum, t) => sum + t.amount, 0);\n    return income - expenses;\n  };\n\n  // Initialize modal state when opened for adding or editing.\n  useEffect(() => {\n    if (showAddPlayerModal) {\n      if (editingPlayer) {\n        setModalPlayer(editingPlayer);\n      } else {\n        setModalPlayer({\n          rut: '', name: '', birthDate: '', skillFoot: '', shoeSize: '', gloveSize: '', height: '', weight: '',\n          agency: {\n            incorporationDate: '', contractActive: false, contractDate: '', contractDuration: '', contractPdfUrl: '', contractPdfFile: null,\n          },\n          club: {\n            name: '', position: '', contractActive: false, contractDate: '', contractDuration: '', salary: '', commissionPercentage: '', commissionFixed: '', transfermarktProfile: '', transfermarktValuation: '',\n          },\n          other: {\n            address: '', phone: '', email: '', instagram: '', photos: [null, null, null], photoUrls: [], videoLinks: [''],\n          }\n        });\n      }\n    }\n  }, [showAddPlayerModal, editingPlayer]);\n\n  const handleDeletePlayer = async (playerId, contractPdfUrl, photoUrls = []) => {\n    const confirmed = await new Promise(resolve => {\n        const confirmBox = document.createElement('div');\n        confirmBox.className = 'fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50 p-4';\n        confirmBox.innerHTML = `\n            <div class=\"bg-gray-800 p-6 rounded-3xl shadow-2xl w-full max-w-sm border border-gray-700 text-white text-center\">\n                <p class=\"mb-4\">Â¿EstÃ¡s seguro de que quieres eliminar este jugador? Esta acciÃ³n es irreversible.</p>\n                <div class=\"flex justify-around\">\n                    <button id=\"confirm-yes\" class=\"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-full transition-colors duration-200\">SÃ­, eliminar</button>\n                    <button id=\"confirm-no\" class=\"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-full transition-colors duration-200\">Cancelar</button>\n                </div>\n            </div>\n        `;\n        document.body.appendChild(confirmBox);\n        document.getElementById('confirm-yes').onclick = () => {\n            document.body.removeChild(confirmBox);\n            resolve(true);\n        };\n        document.getElementById('confirm-no').onclick = () => {\n            document.body.removeChild(confirmBox);\n            resolve(false);\n        };\n    });\n    if (!confirmed) {\n      return;\n    }\n    try {\n      const playerDocRef = doc(db, getPlayersCollectionPath(currentAppId), playerId);\n      await deleteDoc(playerDocRef);\n      if (contractPdfUrl) {\n        const fileRef = ref(storage, contractPdfUrl);\n        await deleteObject(fileRef).catch(e => console.warn(\"Error al eliminar PDF de Storage:\", e));\n      }\n      for (const url of photoUrls) {\n        const fileRef = ref(storage, url);\n        await deleteObject(fileRef).catch(e => console.warn(\"Error al eliminar foto de Storage:\", e));\n      }\n      setError(null);\n    } catch (e) {\n      console.error(\"Error al eliminar jugador:\", e);\n      setError(\"No se pudo eliminar el jugador: \" + e.message);\n    }\n  };\n\n  const handlePdfFileChange = (e) => {\n    if (e.target.files[0]) {\n      setModalPlayer(prev => ({\n        ...prev,\n        agency: { ...prev.agency, contractPdfFile: e.target.files[0] }\n      }));\n    } else {\n      setModalPlayer(prev => ({\n        ...prev,\n        agency: { ...prev.agency, contractPdfFile: null }\n      }));\n    }\n  };\n\n  const handlePhotoFileChange = (e, index) => {\n    const files = Array.from(e.target.files);\n    setModalPlayer(prev => {\n      const updatedPhotos = [...prev.other.photos];\n      if (files[0]) {\n        updatedPhotos[index] = files[0];\n      } else {\n        updatedPhotos[index] = null;\n      }\n      return {\n        ...prev,\n        other: { ...prev.other, photos: updatedPhotos }\n      };\n    });\n  };\n\n  const handleVideoLinkChange = (e, index) => {\n    setModalPlayer(prev => {\n      const updatedVideoLinks = [...prev.other.videoLinks];\n      updatedVideoLinks[index] = e.target.value;\n      return {\n        ...prev,\n        other: { ...prev.other, videoLinks: updatedVideoLinks }\n      };\n    });\n  };\n\n  const addVideoLinkField = () => {\n    setModalPlayer(prev => ({\n      ...prev,\n      other: { ...prev.other, videoLinks: [...prev.other.videoLinks, ''] }\n    }));\n  };\n\n  const removeVideoLinkField = (index) => {\n    setModalPlayer(prev => ({\n      ...prev,\n      other: { ...prev.other, videoLinks: prev.other.videoLinks.filter((_, i) => i !== index) }\n    }));\n  };\n\n  const handleSavePlayer = async () => {\n    if (!modalPlayer.rut || !modalPlayer.name || !modalPlayer.birthDate || !modalPlayer.height || !modalPlayer.weight || !modalPlayer.club.name || !modalPlayer.club.position) {\n      setError(\"Por favor, completa los campos obligatorios: RUT, Nombre, Fecha de Nacimiento, Altura, Peso, Club y PosiciÃ³n en el Club.\");\n      return;\n    }\n    if (!userId) {\n      setError(\"Error: El ID de usuario no estÃ¡ disponible. AsegÃºrate de estar autenticado para subir archivos.\");\n      return;\n    }\n    try {\n      setError(null);\n      let pdfUrl = modalPlayer.agency.contractPdfUrl;\n      // Upload new PDF if one was selected\n      if (modalPlayer.agency.contractActive && modalPlayer.agency.contractPdfFile) {\n        const file = modalPlayer.agency.contractPdfFile;\n        // Use the correct path for contract PDFs based on Firebase Storage rules\n        const storageRef = ref(storage, `player_contracts/${userId}/${file.name}_${new Date().getTime()}`);\n        const snapshot = await uploadBytes(storageRef, file);\n        pdfUrl = await getDownloadURL(snapshot.ref);\n      }\n      const photoUrls = [...(editingPlayer?.other?.photoUrls || [])]; // Start with existing photo URLs\n      // Upload new photos\n      for (let i = 0; i < modalPlayer.other.photos.length; i++) {\n        const photoFile = modalPlayer.other.photos[i];\n        if (photoFile) {\n          // Use the correct path for photos based on Firebase Storage rules\n          const photoStorageRef = ref(storage, `player_photos/${userId}/${photoFile.name}_${new Date().getTime()}`);\n          const photoSnapshot = await uploadBytes(photoStorageRef, photoFile);\n          const url = await getDownloadURL(photoSnapshot.ref);\n          photoUrls.push(url); // Add new URLs\n        }\n      }\n      const playerToSave = {\n        ...modalPlayer,\n        agency: {\n          ...modalPlayer.agency,\n          contractPdfUrl: pdfUrl,\n          contractPdfFile: null\n        },\n        other: {\n          ...modalPlayer.other,\n          photos: [],\n          photoUrls: photoUrls.filter(url => url), // Clean nulls and save URLs\n          videoLinks: modalPlayer.other.videoLinks.filter(link => link.trim() !== ''),\n        }\n      };\n      if (editingPlayer) {\n        const playerDocRef = doc(db, getPlayersCollectionPath(currentAppId), editingPlayer.id);\n        await updateDoc(playerDocRef, playerToSave);\n      } else {\n        await addDoc(collection(db, getPlayersCollectionPath(currentAppId)), playerToSave);\n      }\n      setShowAddPlayerModal(false);\n      setEditingPlayer(null);\n      setError(null);\n    } catch (e) {\n      console.error(\"Error al guardar jugador:\", e);\n      setError(`No se pudo guardar el jugador: ${e.message}. Verifica el RUT y los campos, o problemas con la subida de archivos.`);\n    }\n  };\n\n  if (loading) return <div className=\"text-white text-center mt-8\">Cargando jugadores y finanzas...</div>;\n  if (error) return <div className=\"bg-red-800 text-red-200 p-4 rounded-lg text-center mx-4 mt-4\">{error}</div>;\n\n  return (\n    <div className=\"p-4 md:p-8 bg-gray-900 text-white min-h-screen\">\n      <div className=\"flex flex-wrap justify-between items-center mb-6\">\n        <h2 className=\"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600 mb-4 md:mb-0\">GestiÃ³n de Jugadores</h2>\n        <button\n          onClick={() => { setShowAddPlayerModal(true); setEditingPlayer(null); }} // Opens the modal in add mode\n          className=\"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-full transition-all duration-200 flex items-center space-x-2 shadow-lg transform hover:scale-105\"\n        >\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\" />\n          </svg>\n          <span>Agregar Jugador</span>\n        </button>\n      </div>\n\n      {showAddPlayerModal && (\n        <div className=\"fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50 p-4 overflow-y-auto\">\n          <div className=\"bg-gray-800 p-6 rounded-3xl shadow-2xl w-full max-w-3xl border border-gray-700 relative my-8 max-h-[90vh] overflow-y-auto\">\n            <button onClick={() => { setShowAddPlayerModal(false); setEditingPlayer(null); setError(null); }} className=\"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n              </svg>\n            </button>\n            <h3 className=\"text-2xl font-bold mb-6 text-white text-center\">{editingPlayer ? 'Editar Jugador' : 'Nuevo Jugador'}</h3>\n            {error && <p className=\"bg-red-800 border border-red-600 text-red-200 px-4 py-3 rounded relative mb-4 text-center\">{error}</p>}\n\n            {/* Datos Personales */}\n            <div className=\"mb-8 p-4 border border-gray-700 rounded-2xl\">\n              <h4 className=\"text-xl font-semibold text-yellow-400 mb-4\">Datos Personales</h4>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <input type=\"text\" placeholder=\"RUT (IdentificaciÃ³n Principal)\" value={modalPlayer.rut} onChange={(e) => setModalPlayer({ ...modalPlayer, rut: e.target.value })} className=\"w-full p-3 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\" />\n                <input type=\"text\" placeholder=\"Nombre Completo\" value={modalPlayer.name} onChange={(e) => setModalPlayer({ ...modalPlayer, name: e.target.value })} className=\"w-full p-3 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\" />\n                <input type=\"date\" placeholder=\"Fecha de Nacimiento\" value={modalPlayer.birthDate} onChange={(e) => setModalPlayer({ ...modalPlayer, birthDate: e.target.value })} className=\"w-full p-3 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\" />\n                <input type=\"text\" placeholder=\"Pie HÃ¡bil\" value={modalPlayer.skillFoot} onChange={(e) => setModalPlayer({ ...modalPlayer, skillFoot: e.target.value })} className=\"w-full p-3 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\" />\n                <input type=\"number\" placeholder=\"Talla de Calzado (UK)\" value={modalPlayer.shoeSize} onChange={(e) => setModalPlayer({ ...modalPlayer, shoeSize: e.target.value })} className=\"w-full p-3 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\" />\n                <input type=\"number\" placeholder=\"Talla de Guante (US)\" value={modalPlayer.gloveSize} onChange={(e) => setModalPlayer({ ...modalPlayer, gloveSize: e.target.value })} className=\"w-full p-3 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\" />\n                <input type=\"number\" placeholder=\"Altura (cm)\" value={modalPlayer.height} onChange={(e) => setModalPlayer({ ...modalPlayer, height: e.target.value })} className=\"w-full p-3 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\" />\n                <input type=\"number\" placeholder=\"Peso (kg)\" value={modalPlayer.weight} onChange={(e) => setModalPlayer({ ...modalPlayer, weight: e.target.value })} className=\"w-full p-3 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\" />\n              </div>\n            </div>\n            {/* Datos Profesionales y Financieros */}\n            <div className=\"mb-8 p-4 border border-gray-700 rounded-2xl\">\n              <h4 className=\"text-xl font-semibold text-yellow-400 mb-4\">Datos Profesionales y Financieros</h4>\n              {/* SecciÃ³n de Agencia */}\n              <div className=\"mb-6 pb-4 border-b border-gray-700\">\n                <h5 className=\"text-lg font-medium text-gray-300 mb-3\">Agencia</h5>\n                <input type=\"date\" placeholder=\"Fecha de IncorporaciÃ³n\" value={modalPlayer.agency.incorporationDate} onChange={(e) => setModalPlayer(prev => ({ ...prev, agency: { ...prev.agency, incorporationDate: e.target.value } }))} className=\"w-full p-3 mb-4 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\" />\n                <div className=\"flex items-center justify-between mb-3\">\n                  <label htmlFor=\"agencyContract\" className=\"text-gray-400\">Contrato con Agencia Activo:</label>\n                  <input\n                    type=\"checkbox\"\n                    id=\"agencyContract\"\n                    checked={modalPlayer.agency.contractActive}\n                    onChange={(e) => setModalPlayer(prev => ({ ...prev, agency: { ...prev.agency, contractActive: e.target.checked } }))}\n                    className=\"form-checkbox h-5 w-5 text-blue-600 rounded\"\n                  />\n                </div>\n                {modalPlayer.agency.contractActive && (\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mt-2\">\n                    <input type=\"date\" placeholder=\"Fecha de Contrato\" value={modalPlayer.agency.contractDate} onChange={(e) => setModalPlayer(prev => ({ ...prev, agency: { ...prev.agency, contractDate: e.target.value } }))} className=\"w-full p-3 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\" />\n                    <input type=\"number\" placeholder=\"DuraciÃ³n (meses)\" value={modalPlayer.agency.contractDuration} onChange={(e) => setModalPlayer(prev => ({ ...prev, agency: { ...prev.agency, contractDuration: e.target.value } }))} className=\"w-full p-3 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\" />\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-400 mb-1\">Subir Contrato PDF:</label>\n                      <input type=\"file\" accept=\".pdf\" onChange={handlePdfFileChange} className=\"w-full text-white text-sm file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-500 file:text-white hover:file:bg-blue-600\" />\n                      {modalPlayer.agency.contractPdfFile && <p className=\"text-gray-500 text-sm mt-1\">Archivo seleccionado: {modalPlayer.agency.contractPdfFile.name}</p>}\n                      {modalPlayer.agency.contractPdfUrl && !modalPlayer.agency.contractPdfFile && <p className=\"text-gray-500 text-sm mt-1\">PDF existente: <a href={modalPlayer.agency.contractPdfUrl} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-blue-400 hover:underline\">Ver</a></p>}\n                    </div>\n                  </div>\n                )}\n              </div>\n              {/* SecciÃ³n de Club */}\n              <div className=\"mb-6 pb-4 border-b border-gray-700\">\n                <h5 className=\"text-lg font-medium text-gray-300 mb-3\">Club</h5>\n                <input type=\"text\" placeholder=\"Club Actual\" value={modalPlayer.club.name} onChange={(e) => setModalPlayer(prev => ({ ...prev, club: { ...prev.club, name: e.target.value } }))} className=\"w-full p-3 mb-4 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\" />\n                <input type=\"text\" placeholder=\"PosiciÃ³n en el Club\" value={modalPlayer.club.position} onChange={(e) => setModalPlayer(prev => ({ ...prev, club: { ...prev.club, position: e.target.value } }))} className=\"w-full p-3 mb-4 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\" />\n                <div className=\"flex items-center justify-between mb-3\">\n                  <label htmlFor=\"clubContract\" className=\"text-gray-400\">Contrato con Club Activo:</label>\n                  <input\n                    type=\"checkbox\"\n                    id=\"clubContract\"\n                    checked={modalPlayer.club.contractActive}\n                    onChange={(e) => setModalPlayer(prev => ({ ...prev, club: { ...prev.club, contractActive: e.target.checked } }))}\n                    className=\"form-checkbox h-5 w-5 text-blue-600 rounded\"\n                  />\n                </div>\n                {modalPlayer.club.contractActive && (\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mt-2\">\n                    <input type=\"date\" placeholder=\"Fecha de Contrato del Club\" value={modalPlayer.club.contractDate} onChange={(e) => setModalPlayer(prev => ({ ...prev, club: { ...prev.club, contractDate: e.target.value } }))} className=\"w-full p-3 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\" />\n                    <input type=\"number\" placeholder=\"DuraciÃ³n Club (meses)\" value={modalPlayer.club.contractDuration} onChange={(e) => setModalPlayer(prev => ({ ...prev, club: { ...prev.club, contractDuration: e.target.value } }))} className=\"w-full p-3 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\" />\n                  </div>\n                )}\n                <input type=\"number\" placeholder=\"Salario\" value={modalPlayer.club.salary} onChange={(e) => setModalPlayer(prev => ({ ...prev, club: { ...prev.club, salary: e.target.value } }))} className=\"w-full p-3 mt-4 mb-4 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\" />\n                <input type=\"number\" placeholder=\"ComisiÃ³n (%)\" value={modalPlayer.club.commissionPercentage} onChange={(e) => setModalPlayer(prev => ({ ...prev, club: { ...prev.club, commissionPercentage: e.target.value } }))} className=\"w-full p-3 mb-4 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\" />\n                <input type=\"number\" placeholder=\"Monto Fijo de ComisiÃ³n\" value={modalPlayer.club.commissionFixed} onChange={(e) => setModalPlayer(prev => ({ ...prev, club: { ...prev.club, commissionFixed: e.target.value } }))} className=\"w-full p-3 mb-4 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\" />\n                <input type=\"url\" placeholder=\"URL Perfil Transfermarkt\" value={modalPlayer.club.transfermarktProfile} onChange={(e) => setModalPlayer(prev => ({ ...prev, club: { ...prev.club, transfermarktProfile: e.target.value } }))} className=\"w-full p-3 mb-4 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\" />\n                <input type=\"text\" placeholder=\"ValoraciÃ³n Transfermarkt\" value={modalPlayer.club.transfermarktValuation} onChange={(e) => setModalPlayer(prev => ({ ...prev, club: { ...prev.club, transfermarktValuation: e.target.value } }))} className=\"w-full p-3 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\" />\n              </div>\n              {/* SecciÃ³n Otros */}\n              <div>\n                <h5 className=\"text-lg font-medium text-gray-300 mb-3\">Otros</h5>\n                <input type=\"text\" placeholder=\"DirecciÃ³n\" value={modalPlayer.other.address} onChange={(e) => setModalPlayer(prev => ({ ...prev, other: { ...prev.other, address: e.target.value } }))} className=\"w-full p-3 mb-4 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\" />\n                <input type=\"tel\" placeholder=\"TelÃ©fono\" value={modalPlayer.other.phone} onChange={(e) => setModalPlayer(prev => ({ ...prev, other: { ...prev.other, phone: e.target.value } }))} className=\"w-full p-3 mb-4 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\" />\n                <input type=\"email\" placeholder=\"Correo ElectrÃ³nico de Contacto\" value={modalPlayer.other.email} onChange={(e) => setModalPlayer(prev => ({ ...prev, other: { ...prev.other, email: e.target.value } }))} className=\"w-full p-3 mb-4 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\" />\n                <input type=\"url\" placeholder=\"URL de Instagram\" value={modalPlayer.other.instagram} onChange={(e) => setModalPlayer(prev => ({ ...prev, other: { ...prev.other, instagram: e.target.value } }))} className=\"w-full p-3 mb-4 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\" />\n                <div className=\"mb-4\">\n                  <label className=\"block text-sm font-medium text-gray-400 mb-2\">Fotos (mÃ¡x. 3):</label>\n                  {modalPlayer.other.photoUrls && modalPlayer.other.photoUrls.length > 0 && (\n                    <div className=\"flex flex-wrap gap-2 mb-2\">\n                      {modalPlayer.other.photoUrls.map((url, idx) => (\n                        <div key={idx} className=\"relative w-20 h-20 rounded-xl overflow-hidden border border-gray-600\">\n                          <img src={url} alt={`Vista previa ${idx + 1}`} className=\"w-full h-full object-cover\" />\n                          <button\n                            onClick={() => {\n                              setModalPlayer(prev => {\n                                const newPhotoUrls = prev.other.photoUrls.filter((_, i) => i !== idx);\n                                return { ...prev, other: { ...prev.other, photoUrls: newPhotoUrls } };\n                              });\n                            }}\n                            className=\"absolute top-1 right-1 bg-red-600 hover:bg-red-700 text-white rounded-full p-1 text-xs\"\n                            title=\"Eliminar foto existente\"\n                          >\n                            X\n                          </button>\n                        </div>\n                      ))}\n                    </div>\n                  )}\n                  {[0, 1, 2].map((index) => (\n                    <input key={index} type=\"file\" accept=\"image/*\" onChange={(e) => handlePhotoFileChange(e, index)} className=\"w-full text-white text-sm file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-purple-500 file:text-white hover:file:bg-purple-600\" />\n                  ))}\n                </div>\n                <div className=\"mb-4\">\n                  <label className=\"block text-sm font-medium text-gray-400 mb-2\">Enlaces de Video:</label>\n                  {modalPlayer.other.videoLinks.map((link, index) => (\n                    <div key={index} className=\"flex items-center mb-2\">\n                      <input\n                        type=\"url\"\n                        placeholder={`Enlace de Video ${index + 1}`}\n                        value={link}\n                        onChange={(e) => handleVideoLinkChange(e, index)}\n                        className=\"w-full p-3 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 mr-2\"\n                      />\n                      {modalPlayer.other.videoLinks.length > 1 && (\n                        <button\n                          onClick={() => removeVideoLinkField(index)}\n                          className=\"bg-red-600 hover:bg-red-700 text-white p-2 rounded-full transition-colors duration-200 ml-4\"\n                        >\n                          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                          </svg>\n                        </button>\n                      )}\n                    </div>\n                  ))}\n                  <button\n                    onClick={addVideoLinkField}\n                    className=\"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full text-sm mt-2 transition-all duration-300 transform hover:scale-105\"\n                  >\n                    Agregar Enlace de Video\n                  </button>\n                </div>\n              </div>\n            </div>\n            <button\n              onClick={handleSavePlayer}\n              className=\"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl transition-all duration-300 shadow-lg transform hover:scale-105\"\n            >\n              {editingPlayer ? 'Guardar Cambios' : 'Crear Jugador'}\n            </button>\n            {editingPlayer && (\n              <button\n                onClick={() => handleDeletePlayer(editingPlayer.id, editingPlayer.agency?.contractPdfUrl, editingPlayer.other?.photoUrls)}\n                className=\"w-full bg-red-600 hover:bg-red-700 text-white font-bold py-3 rounded-xl transition-all duration-300 shadow-lg mt-4 transform hover:scale-105\"\n              >\n                Eliminar Jugador\n              </button>\n            )}\n          </div>\n        </div>\n      )}\n      {players.length === 0 ? (\n        <p className=\"text-gray-400 text-center mt-8\">No hay jugadores registrados. Agrega uno para empezar.</p>\n      ) : (\n        <div className=\"overflow-x-auto bg-gray-800 rounded-3xl shadow-xl border border-gray-700\">\n          <table className=\"min-w-full divide-y divide-gray-700\">\n            <thead className=\"bg-gray-700\">\n              <tr>\n                <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider\">Nombre</th>\n                <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider\">Club</th>\n                <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider\">PosiciÃ³n</th>\n                <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider\">Balance Personal</th>\n                <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider\">Vencimiento Contrato</th>\n                <th scope=\"col\" className=\"px-6 py-3 text-right text-xs font-medium text-gray-300 uppercase tracking-wider\">Acciones</th>\n              </tr>\n            </thead>\n            <tbody className=\"bg-gray-800 divide-y divide-gray-700\">\n              {players.map(player => {\n                const contractExpiringSoon = player.agency.contractActive && isExpiringSoon(player.agency.contractDate, player.agency.contractDuration);\n                return (\n                  <tr key={player.id} className=\"hover:bg-gray-700 transition-colors duration-150\">\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <div className=\"text-sm font-medium text-white\">{player.name}</div>\n                      <div className=\"text-xs text-gray-400\">RUT: {player.rut}</div>\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <div className=\"text-sm text-gray-300\">{player.club?.name || 'N/A'}</div>\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <div className=\"text-sm text-gray-300\">{player.club?.position || 'N/A'}</div>\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <div className={`text-sm font-bold ${getPlayerBalance(player.id) >= 0 ? 'text-green-500' : 'text-red-500'}`}>\n                        ${getPlayerBalance(player.id).toFixed(2)}\n                      </div>\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <div className={`text-sm ${contractExpiringSoon ? 'text-red-400 font-semibold' : 'text-gray-300'}`}>\n                        {player.agency.contractActive ? getContractExpirationDate(player.agency.contractDate, player.agency.contractDuration) : 'N/A'}\n                        {contractExpiringSoon && (\n                          <span className=\"ml-2 px-2 py-0.5 text-xs font-semibold text-white bg-orange-500 rounded-full\">\n                            Â¡Alerta!\n                          </span>\n                        )}\n                      </div>\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\n                      <button\n                        onClick={() => { setShowAddPlayerModal(true); setEditingPlayer(player); }}\n                        className=\"text-blue-500 hover:text-blue-700 px-3 py-1 rounded-full border border-blue-500 hover:border-blue-700 transition-colors duration-200\"\n                      >\n                        Editar\n                      </button>\n                    </td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Finance management component.\nconst FinanceManager = ({ db, userId, currentAppId }) => {\n  const [finances, setFinances] = useState([]);\n  const [players, setPlayers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [newTransaction, setNewTransaction] = useState({\n    playerId: '',\n    type: 'income',\n    description: '',\n    amount: ''\n  });\n\n  const getFinancesCollectionPath = (appId) => {\n    // Usamos el path de datos pÃºblicos para la colaboraciÃ³n\n    return appId ? `artifacts/${appId}/public/data/finances` : `public/data/finances`;\n  };\n  const getPlayersCollectionPath = (appId) => {\n    // Usamos el path de datos pÃºblicos para la colaboraciÃ³n\n    return appId ? `artifacts/${appId}/public/data/players` : `public/data/players`;\n  };\n\n  useEffect(() => {\n    if (!db) return;\n    setLoading(true);\n    setError(null);\n    const playersCollectionRef = collection(db, getPlayersCollectionPath(currentAppId));\n    const unsubscribePlayers = onSnapshot(playersCollectionRef, (snapshot) => {\n      const playersData = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n      setPlayers(playersData);\n    }, (err) => {\n      console.error(\"Error al cargar jugadores para finanzas:\", err);\n      setError(\"No se pudieron cargar los jugadores para finanzas.\");\n    });\n    const financesCollectionRef = collection(db, getFinancesCollectionPath(currentAppId));\n    const unsubscribeFinances = onSnapshot(financesCollectionRef, (snapshot) => {\n      const financesData = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n      setFinances(financesData);\n      setLoading(false);\n    }, (err) => {\n      console.error(\"Error al cargar finanzas:\", err);\n      setError(\"No se pudieron cargar las finanzas.\");\n      setLoading(false);\n    });\n    return () => {\n      unsubscribePlayers();\n      unsubscribeFinances();\n    };\n  }, [db, currentAppId]);\n\n  const handleAddTransaction = async () => {\n    if (!newTransaction.playerId || !newTransaction.description || !newTransaction.amount) {\n      setError(\"Por favor, completa todos los campos de la transacciÃ³n.\");\n      return;\n    }\n    try {\n      await addDoc(collection(db, getFinancesCollectionPath(currentAppId)), {\n        ...newTransaction,\n        amount: parseFloat(newTransaction.amount)\n      });\n      setNewTransaction({ playerId: '', type: 'income', description: '', amount: '' });\n      setError(null);\n    } catch (e) {\n      console.error(\"Error al agregar transacciÃ³n:\", e);\n      setError(\"No se pudo agregar la transacciÃ³n.\");\n    }\n  };\n\n  const handleDeleteTransaction = async (id) => {\n    try {\n      const financeDocRef = doc(db, getFinancesCollectionPath(currentAppId), id);\n      await deleteDoc(financeDocRef);\n    } catch (e) {\n      console.error(\"Error al eliminar transacciÃ³n:\", e);\n      setError(\"No se pudo eliminar la transacciÃ³n.\");\n    }\n  };\n\n  if (loading) return <div className=\"text-white text-center mt-8\">Cargando datos financieros...</div>;\n  if (error) return <div className=\"bg-red-800 text-red-200 p-4 rounded-lg text-center mx-4 mt-4\">{error}</div>;\n\n  const playerMap = players.reduce((map, player) => {\n    map[player.id] = player.name;\n    return map;\n  }, {});\n\n  const totalIncome = finances\n    .filter(t => t.type === 'income')\n    .reduce((sum, t) => sum + t.amount, 0);\n\n  const totalExpenses = finances\n    .filter(t => t.type === 'expense')\n    .reduce((sum, t) => sum + t.amount, 0);\n\n  const totalBalance = totalIncome - totalExpenses;\n\n  return (\n    <div className=\"p-4 md:p-8 bg-gray-900 text-white min-h-screen\">\n      <h2 className=\"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600 mb-6\">GestiÃ³n de Finanzas</h2>\n      {/* Resumen Financiero */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8 text-center\">\n        <div className=\"bg-gray-800 p-6 rounded-3xl shadow-xl border border-gray-700\">\n          <h3 className=\"text-xl text-green-400 font-semibold\">Ingresos Totales</h3>\n          <p className=\"text-2xl font-bold\">${totalIncome.toFixed(2)}</p>\n        </div>\n        <div className=\"bg-gray-800 p-6 rounded-3xl shadow-xl border border-gray-700\">\n          <h3 className=\"text-xl text-red-400 font-semibold\">Gastos Totales</h3>\n          <p className=\"text-2xl font-bold\">${totalExpenses.toFixed(2)}</p>\n        </div>\n        <div className=\"bg-gray-800 p-6 rounded-3xl shadow-xl border border-gray-700\">\n          <h3 className=\"text-xl text-blue-400 font-semibold\">Balance Total</h3>\n          <p className=\"text-2xl font-bold\">${totalBalance.toFixed(2)}</p>\n        </div>\n      </div>\n      {/* Formulario Nueva TransacciÃ³n */}\n      <div className=\"bg-gray-800 p-6 rounded-3xl shadow-xl border border-gray-700 mb-8\">\n        <h3 className=\"text-2xl font-bold text-white mb-4\">Nueva TransacciÃ³n</h3>\n        {error && <p className=\"text-red-400 text-sm mb-4\">{error}</p>}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <select\n            value={newTransaction.playerId}\n            onChange={(e) => setNewTransaction({ ...newTransaction, playerId: e.target.value })}\n            className=\"w-full p-3 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-purple-500\"\n          >\n            <option value=\"\">Selecciona un jugador</option>\n            {players.map(player => (\n              <option key={player.id} value={player.id}>{player.name}</option>\n            ))}\n          </select>\n          <select\n            value={newTransaction.type}\n            onChange={(e) => setNewTransaction({ ...newTransaction, type: e.target.value })}\n            className=\"w-full p-3 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-purple-500\"\n          >\n            <option value=\"income\">Ingreso</option>\n            <option value=\"expense\">Gasto</option>\n          </select>\n          <input\n            type=\"text\"\n            placeholder=\"DescripciÃ³n\"\n            value={newTransaction.description}\n            onChange={(e) => setNewTransaction({ ...newTransaction, description: e.target.value })}\n            className=\"w-full p-3 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-purple-500\"\n          />\n          <input\n            type=\"number\"\n            placeholder=\"Monto\"\n            value={newTransaction.amount}\n            onChange={(e) => setNewTransaction({ ...newTransaction, amount: e.target.value })}\n            className=\"w-full p-3 bg-gray-700 text-white rounded-xl border border-gray-600 focus:outline-none focus:ring-2 focus:ring-purple-500\"\n          />\n        </div>\n        <button\n          onClick={handleAddTransaction}\n          className=\"w-full mt-6 bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl transition-all duration-300 shadow-lg transform hover:scale-105\"\n        >\n          Agregar TransacciÃ³n\n        </button>\n      </div>\n      {/* Lista de Transacciones */}\n      <div className=\"bg-gray-800 p-6 rounded-3xl shadow-xl border border-gray-700\">\n        <h3 className=\"text-2xl font-bold text-white mb-4\">Historial de Transacciones</h3>\n        {finances.length === 0 ? (\n          <p className=\"text-gray-400 text-center\">No hay transacciones registradas.</p>\n        ) : (\n          <div className=\"space-y-4\">\n            {finances.map(transaction => (\n              <div key={transaction.id} className=\"bg-gray-700 p-4 rounded-xl flex justify-between items-center transition-transform hover:scale-105 duration-200\">\n                <div className=\"flex-1\">\n                  <p className=\"font-semibold text-lg text-white\">{transaction.description}</p>\n                  <p className=\"text-sm text-gray-400\">Jugador: {playerMap[transaction.playerId] || 'No asignado'}</p>\n                </div>\n                <div className={`font-bold text-xl ml-4 ${transaction.type === 'income' ? 'text-green-400' : 'text-red-400'}`}>\n                  {transaction.type === 'income' ? '+' : '-'} ${transaction.amount.toFixed(2)}\n                </div>\n                <button\n                  onClick={() => handleDeleteTransaction(transaction.id)}\n                  className=\"bg-red-600 hover:bg-red-700 text-white p-2 rounded-full transition-colors duration-200 ml-4\"\n                >\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                  </svg>\n                </button>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\n// Other view component.\nconst OtherView = ({ db, currentAppId }) => {\n    const [players, setPlayers] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null);\n    // Helper to build the player collection path safely.\n    const getPlayersCollectionPath = (appId) => {\n        return appId ? `artifacts/${appId}/public/data/players` : `public/data/players`;\n    };\n    // Helper to format the date to DD/MM/YYYY, fixing the one-day shift issue.\n    const formatDateForDisplay = (dateString) => {\n        if (!dateString) return 'N/A';\n        const parts = dateString.split('-');\n        // Ensure the date is created using local time, not UTC.\n        // This prevents the timezone shift.\n        const date = new Date(parseInt(parts[0]), parseInt(parts[1]) - 1, parseInt(parts[2]));\n        return date.toLocaleDateString('es-ES', {\n            day: '2-digit',\n            month: '2-digit',\n            year: 'numeric'\n        });\n    };\n    useEffect(() => {\n        if (!db) return;\n        setLoading(true);\n        setError(null);\n        const playersCollectionRef = collection(db, getPlayersCollectionPath(currentAppId));\n        const unsubscribe = onSnapshot(playersCollectionRef, (snapshot) => {\n            const playersData = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n            setPlayers(playersData);\n            setLoading(false);\n        }, (err) => {\n            console.error(\"Error al cargar jugadores para la vista 'Otros':\", err);\n            setError(\"No se pudieron cargar los datos de los jugadores.\");\n            setLoading(false);\n        });\n        return () => unsubscribe();\n    }, [db, currentAppId]);\n    if (loading) return <div className=\"text-white text-center mt-8\">Cargando datos...</div>;\n    if (error) return <div className=\"bg-red-800 text-red-200 p-4 rounded-lg text-center mx-4 mt-4\">{error}</div>;\n    const months = [\"Enero\", \"Febrero\", \"Marzo\", \"Abril\", \"Mayo\", \"Junio\", \"Julio\", \"Agosto\", \"Septiembre\", \"Octubre\", \"Noviembre\", \"Diciembre\"];\n    // Filter players who have a birth date and sort them by month and then day\n    const playersWithBirthdays = players.filter(p => p.birthDate);\n    const sortedPlayers = playersWithBirthdays.sort((a, b) => {\n        const dateA = new Date(a.birthDate + 'T00:00:00'); // Add T00:00:00 to force local time\n        const dateB = new Date(b.birthDate + 'T00:00:00');\n        const monthA = dateA.getMonth();\n        const monthB = dateB.getMonth();\n        const dayA = dateA.getDate();\n        const dayB = dateB.getDate();\n        if (monthA !== monthB) {\n            return monthA - monthB;\n        }\n        return dayA - dayB;\n    });\n    const groupedBirthdays = sortedPlayers.reduce((acc, player) => {\n        const date = new Date(player.birthDate + 'T00:00:00');\n        const monthIndex = date.getMonth();\n        const monthName = months[monthIndex];\n        if (!acc[monthName]) {\n            acc[monthName] = [];\n        }\n        acc[monthName].push(player);\n        return acc;\n    }, {});\n    \n    return (\n        <div className=\"p-4 md:p-8 bg-gray-900 text-white min-h-screen\">\n            <h2 className=\"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600 mb-6\">Otros</h2>\n            {/* PrÃ³ximos CumpleaÃ±os Section */}\n            <div className=\"bg-gray-800 p-6 rounded-3xl shadow-xl border border-gray-700 mb-8\">\n                <h3 className=\"text-2xl font-bold text-white mb-4\">PrÃ³ximos CumpleaÃ±os</h3>\n                {Object.keys(groupedBirthdays).length === 0 ? (\n                    <p className=\"text-gray-400\">No hay cumpleaÃ±os registrados.</p>\n                ) : (\n                    Object.entries(groupedBirthdays).map(([month, playersInMonth]) => (\n                        <div key={month} className=\"mb-6\">\n                            <h4 className=\"text-xl font-semibold text-blue-400 mb-2\">{month}</h4>\n                            <div className=\"space-y-2\">\n                                {playersInMonth.map(player => (\n                                    <div key={player.id} className=\"flex items-center justify-between p-3 bg-gray-700 rounded-xl transition-all duration-200 hover:bg-gray-600\">\n                                        <div className=\"flex items-center\">\n                                            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6 text-yellow-300 mr-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 7V3m8 4V3m-9 8h8m-11 0h12a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2z\" />\n                                            </svg>\n                                            <span className=\"text-white\">{player.name}</span>\n                                        </div>\n                                        <span className=\"font-medium text-gray-300\">{formatDateForDisplay(player.birthDate)}</span>\n                                    </div>\n                                ))}\n                            </div>\n                        </div>\n                    ))\n                )}\n            </div>\n            {/* Other Section (Pending) */}\n            <div className=\"bg-gray-800 p-6 rounded-3xl shadow-xl border border-gray-700\">\n                <h3 className=\"text-2xl font-bold text-white mb-4\">SecciÃ³n Pendiente</h3>\n                <p className=\"text-gray-400\">Esta secciÃ³n se puede utilizar para futuras funcionalidades. Â¡AvÃ­same si tienes mÃ¡s ideas!</p>\n            </div>\n        </div>\n    );\n};\n\nconst App = () => {\n  const [db, setDb] = useState(null);\n  const [auth, setAuth] = useState(null);\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [userId, setUserId] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [currentPage, setCurrentPage] = useState('Home');\n  useEffect(() => {\n    // Enable debug logs for Firebase, this is useful for debugging issues\n    setLogLevel('debug');\n    \n    const initializeFirebase = async () => {\n        try {\n            // Log the received configuration for debugging purposes.\n            console.log(\"ConfiguraciÃ³n de Firebase recibida:\", firebaseConfig);\n            if (!firebaseConfig.apiKey) {\n                console.error(\"Firebase Initialization Error: API Key not found in configuration.\");\n                setError(\"No se pudo iniciar Firebase. La clave de API es invÃ¡lida o no se proporcionÃ³. Por favor, asegÃºrate de que el entorno de la plataforma la estÃ© inyectando correctamente.\");\n                setLoading(false);\n                return;\n            }\n            const app = initializeApp(firebaseConfig);\n            const authInstance = getAuth(app);\n            const dbInstance = getFirestore(app);\n            const storageInstance = getStorage(app);\n            setAuth(authInstance);\n            setDb(dbInstance);\n            // Handle authentication state\n            const unsubscribe = onAuthStateChanged(authInstance, (user) => {\n                if (user) {\n                    setIsAuthenticated(true);\n                    setUserId(user.uid);\n                } else {\n                    setIsAuthenticated(false);\n                    setUserId(null); // Ensure userId is null if not authenticated\n                }\n                setLoading(false); // Always stop loading after checking authentication\n            });\n            // Clean up the auth listener\n            return () => unsubscribe();\n        } catch (e) {\n            console.error(\"Error initializing Firebase:\", e);\n            setError(`No se pudo iniciar Firebase. Revisa si tu configuraciÃ³n de Firebase es correcta. Error: ${e.message}`);\n            setLoading(false);\n        }\n    };\n    initializeFirebase();\n  }, []); // Empty dependencies to run only once on component mount\n  const handleLoginSuccess = () => {\n    // onAuthStateChanged will fire and update authentication status\n    // We don't need to do anything here beyond ensuring the flow continues\n  };\n  const handleLogout = async () => {\n    try {\n      await signOut(auth);\n      setUserId(null); // Clear userId\n      setCurrentPage('Home');\n    } catch (e) {\n      console.error(\"Error al cerrar sesiÃ³n:\", e);\n      setError(\"No se pudo cerrar la sesiÃ³n correctamente.\");\n    }\n  };\n  const renderContent = () => {\n    if (loading) {\n      return (\n        <div className=\"flex items-center justify-center min-h-screen bg-gradient-to-br from-gray-900 to-gray-700\">\n          <div className=\"text-gray-300\">Cargando aplicaciÃ³n...</div>\n        </div>\n      );\n    }\n    if (error) {\n      return (\n        <div className=\"flex items-center justify-center min-h-screen bg-gradient-to-br from-gray-900 to-gray-700 p-4 text-center\">\n            <div className=\"bg-red-800 border border-red-600 text-red-200 px-6 py-4 rounded-lg shadow-xl w-full max-w-lg\">\n                <strong className=\"font-bold text-xl block mb-2\">Error CrÃ­tico:</strong>\n                <p className=\"text-lg\">{error}</p>\n                <p className=\"text-sm mt-4\">Por favor, revisa la consola para mÃ¡s detalles tÃ©cnicos sobre el problema de inicializaciÃ³n de Firebase.</p>\n            </div>\n        </div>\n      );\n    }\n    if (!isAuthenticated) {\n      // Pass onLoginSuccess so LoginScreen can notify App\n      return <LoginScreen auth={auth} onLoginSuccess={handleLoginSuccess} />;\n    }\n    switch (currentPage) {\n      case 'Home':\n        return <HomeView />;\n      case 'PlayerManagement':\n        return <PlayerManager db={db} userId={userId} currentAppId={currentAppId} />;\n      case 'FinanceManagement':\n        return <FinanceManager db={db} userId={userId} currentAppId={currentAppId} />;\n      case 'Other':\n        return <OtherView db={db} currentAppId={currentAppId} />;\n      default:\n        return <HomeView />;\n    }\n  };\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-900 to-gray-700 font-inter antialiased text-gray-100\">\n      {isAuthenticated && <Navbar setCurrentPage={setCurrentPage} handleLogout={handleLogout} />}\n      <main className=\"container mx-auto py-8\">\n        {renderContent()}\n      </main>\n    </div>\n  );\n};\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}